

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Reference &mdash; gridwxcomp 0.1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/copybutton.js"></script>
        <script type="text/javascript" src="_static/custom.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Change Log" href="changelog.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> gridwxcomp
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#quick-start-from-command-line">Quick start from command line</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-line-interface">Command Line Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gridwxcomp">gridwxcomp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gridwxcomp-prep-input">gridwxcomp prep-input</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gridwxcomp-calc-bias-ratios">gridwxcomp calc-bias-ratios</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gridwxcomp-download-gridmet-opendap">gridwxcomp download-gridmet-opendap</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gridwxcomp-spatial">gridwxcomp spatial</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gridwxcomp-plot">gridwxcomp plot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#python-functions-classes-and-modules">Python functions, classes, and modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prep-input">prep_input</a></li>
<li class="toctree-l3"><a class="reference internal" href="#download-gridmet-opendap">download_gridmet_opendap</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios">calc_bias_ratios</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gridwxcomp.spatial">spatial</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gridwxcomp.plot">plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interpgdal">InterpGdal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gridwxcomp.util">util</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-1-0">Version 0.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-0-9x">Version 0.0.9x</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-0-7x">Version 0.0.7x</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-0-6x">Version 0.0.6x</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-0-5x">Version 0.0.5x</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-0-4x">Version 0.0.4x</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-0-3x">Version 0.0.3x</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-0-2x">Version 0.0.2x</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-0-1x">Version 0.0.1x</a></li>
</ul>
</li>
</ul>

            
          
    <a href="genindex.html">Index</a>
  
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">gridwxcomp</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>API Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<p>This page documents all routines provided by <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code>. Tools for different routines are listed roughly in the order that they would normally be used.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#command-line-interface" id="id15">Command Line Interface</a></p>
<ul>
<li><p><a class="reference internal" href="#gridwxcomp" id="id16">gridwxcomp</a></p></li>
<li><p><a class="reference internal" href="#gridwxcomp-prep-input" id="id17">gridwxcomp prep-input</a></p></li>
<li><p><a class="reference internal" href="#gridwxcomp-calc-bias-ratios" id="id18">gridwxcomp calc-bias-ratios</a></p></li>
<li><p><a class="reference internal" href="#gridwxcomp-download-gridmet-opendap" id="id19">gridwxcomp download-gridmet-opendap</a></p></li>
<li><p><a class="reference internal" href="#gridwxcomp-spatial" id="id20">gridwxcomp spatial</a></p></li>
<li><p><a class="reference internal" href="#gridwxcomp-plot" id="id21">gridwxcomp plot</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#python-functions-classes-and-modules" id="id22">Python functions, classes, and modules</a></p>
<ul>
<li><p><a class="reference internal" href="#prep-input" id="id23">prep_input</a></p></li>
<li><p><a class="reference internal" href="#download-gridmet-opendap" id="id24">download_gridmet_opendap</a></p></li>
<li><p><a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" id="id25">calc_bias_ratios</a></p></li>
<li><p><a class="reference internal" href="#module-gridwxcomp.spatial" id="id26">spatial</a></p></li>
<li><p><a class="reference internal" href="#module-gridwxcomp.plot" id="id27">plot</a></p></li>
<li><p><a class="reference internal" href="#interpgdal" id="id28">InterpGdal</a></p></li>
<li><p><a class="reference internal" href="#module-gridwxcomp.util" id="id29">util</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="command-line-interface">
<h2><a class="toc-backref" href="#id15">Command Line Interface</a><a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="gridwxcomp">
<h3><a class="toc-backref" href="#id16">gridwxcomp</a><a class="headerlink" href="#gridwxcomp" title="Permalink to this headline">¶</a></h3>
<p>Access gridwxcomp functionality from the command line</p>
<p>The <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code> tools are accesible via a command line interface using
the console command “gridwxcomp”. To print a list of all available commands
from the command line type,:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gridwxcomp</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>Or to print information on a specific command,:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gridwxcomp</span> <span class="n">COMMAND</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>Basic usage to run a command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gridwxcomp <span class="o">[</span>OPTIONS<span class="o">]</span> COMMAND <span class="o">[</span>ARGS<span class="o">]</span>...
</pre></div>
</div>
<p class="rubric">Commands</p>
<dl class="object">
<dt>
<code class="sig-name descname">calc-bias-ratios</code></dt>
<dd><p>Bias ratio statistics of station-to-gridMET…</p>
</dd></dl>

<dl class="object">
<dt>
<code class="sig-name descname">download-gridmet-opendap</code></dt>
<dd><p>Download gridMET climate time series using…</p>
</dd></dl>

<dl class="object">
<dt>
<code class="sig-name descname">plot</code></dt>
<dd><p>Create comparison or diagnostic graphics Plot…</p>
</dd></dl>

<dl class="object">
<dt>
<code class="sig-name descname">prep-input</code></dt>
<dd><p>Pairs climate metadata with grid.</p>
</dd></dl>

<dl class="object">
<dt>
<code class="sig-name descname">spatial</code></dt>
<dd><p>Spatially interpolate ratio statistics 2-D…</p>
</dd></dl>

</div>
<div class="section" id="gridwxcomp-prep-input">
<h3><a class="toc-backref" href="#id17">gridwxcomp prep-input</a><a class="headerlink" href="#gridwxcomp-prep-input" title="Permalink to this headline">¶</a></h3>
<p>Pairs climate metadata with grid.</p>
<p>Read climate station metadata file, e.g. from <a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">PyWeatherQAQC</a>
and match each station with gridcell locations, save CSV. The required
argument <code class="docutils literal notranslate"><span class="pre">STATION_META_PATH</span></code> is a file containing metadata of climate
stations, if it was not built from <a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">PyWeatherQAQC</a>,
the file should be in CSV format and contain at least these four columns:</p>
<ul class="simple">
<li><p>Latitude</p></li>
<li><p>Longitude</p></li>
<li><p>Station</p></li>
<li><p>Filename</p></li>
</ul>
<p>For example the “Station_Data.txt” file is included as an example at
<a class="reference external" href="https://raw.githubusercontent.com/WSWUP/gridwxcomp/master/gridwxcomp/example_data/Station_Data.txt">gridwxcomp/gridwxcomp/example_data/</a>, contains</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 16%" />
<col style="width: 38%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Latitude</p></th>
<th class="head"><p>Longitude</p></th>
<th class="head"><p>Station</p></th>
<th class="head"><p>Filename</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>40.37232</p></td>
<td><p>-110.20918</p></td>
<td><p>Bluebell (Neola Area)</p></td>
<td><p>BluebellUT_Daily</p></td>
</tr>
<tr class="row-odd"><td><p>38.38346</p></td>
<td><p>-111.63583</p></td>
<td><p>Loa</p></td>
<td><p>LoaUT_Daily</p></td>
</tr>
<tr class="row-even"><td><p>38.32829</p></td>
<td><p>-108.85549</p></td>
<td><p>Bedrock</p></td>
<td><p>BedrockCO_Daily</p></td>
</tr>
<tr class="row-odd"><td><p>38.64294</p></td>
<td><p>-109.39880</p></td>
<td><p>Castle Valley near Moab</p></td>
<td><p>CastleValleyUT_Daily</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Also, if not created by <code class="docutils literal notranslate"><span class="pre">PyWeatherQaQc</span></code>, the climate station time series
files should be in CSV format with a date column with datetime formats,
e.g. ‘12/01/2018’. By default <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span> <span class="pre">prep-input</span></code> creates the file
“merged_input.csv” in the current working directory which contains
metadata from climate stations as well as the lat, long, and gridMET ID
(cell index) of the nearest gridMET cell’s centroid.</p>
<p>If using a gridded product that is not gridMET this routine has the ability
to create a grid metadata file if <code class="docutils literal notranslate"><span class="pre">--grid-path</span></code> and <code class="docutils literal notranslate"><span class="pre">--grid-id-name</span></code>
arguments are given. The grid should be a uniform grid with a resolution in
decimal degrees, it should also have a cell identifier that is of integer
data type- the name of this property in your grid is what is passed as
<code class="docutils literal notranslate"><span class="pre">--grid-id-name</span></code>. Also if using a different grid, the time series files
associated with the cell IDs that match your station locations should be in
the directory given as <code class="docutils literal notranslate"><span class="pre">--grid-data-dir</span></code>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gridwxcomp prep-input <span class="o">[</span>OPTIONS<span class="o">]</span> STATION_META_PATH
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-prep-input-o">
<code class="sig-name descname">-o</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--out-path</code><code class="sig-prename descclassname"> &lt;out_path&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-prep-input-o" title="Permalink to this definition">¶</a></dt>
<dd><p>File path to save output CSV</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-prep-input-gm">
<code class="sig-name descname">-gm</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--grid-meta</code><code class="sig-prename descclassname"> &lt;grid_meta&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-prep-input-gm" title="Permalink to this definition">¶</a></dt>
<dd><p>File path to grid metadata, e.g. gridmet_cell_data.csv</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-prep-input-gp">
<code class="sig-name descname">-gp</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--grid-path</code><code class="sig-prename descclassname"> &lt;grid_path&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-prep-input-gp" title="Permalink to this definition">¶</a></dt>
<dd><p>File path to master grid vector file if not using gridMET</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-prep-input-gin">
<code class="sig-name descname">-gin</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--grid-id-name</code><code class="sig-prename descclassname"> &lt;grid_id_name&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-prep-input-gin" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of gridcell identifier if not using gridMET</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-prep-input-gdd">
<code class="sig-name descname">-gdd</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--grid-data-dir</code><code class="sig-prename descclassname"> &lt;grid_data_dir&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-prep-input-gdd" title="Permalink to this definition">¶</a></dt>
<dd><p>Directory with grid time series if not using gridMET</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-prep-input-quiet">
<code class="sig-name descname">--quiet</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-prep-input-quiet" title="Permalink to this definition">¶</a></dt>
<dd><p>Supress command line output</p>
</dd></dl>

<p class="rubric">Arguments</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-prep-input-arg-station-meta-path">
<code class="sig-name descname">STATION_META_PATH</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-prep-input-arg-station-meta-path" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

</div>
<div class="section" id="gridwxcomp-calc-bias-ratios">
<h3><a class="toc-backref" href="#id18">gridwxcomp calc-bias-ratios</a><a class="headerlink" href="#gridwxcomp-calc-bias-ratios" title="Permalink to this headline">¶</a></h3>
<p>Bias ratio statistics of station-to-gridMET</p>
<p>Calculates mean bias ratios between climate station to gridMET variables
at multiple time periods: monthly, annual, growing season. Other statistics
include day counts, standard deviation, and coefficient of variation.
Options allow for excluding statistics on months with less than a certain
number of days (default 10). gridMET variable names available and their
default paired climate variable names include:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 36%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>gridMET</p></th>
<th class="head"><p>station</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘u2_ms’</p></td>
<td><p>‘ws_2m (m/s)’</p></td>
</tr>
<tr class="row-odd"><td><p>‘tmin_c’</p></td>
<td><p>‘TMin (C)’</p></td>
</tr>
<tr class="row-even"><td><p>‘tmax_c’</p></td>
<td><p>‘TMax (C)’</p></td>
</tr>
<tr class="row-odd"><td><p>‘srad_wm2’</p></td>
<td><p>‘Rs (w/m2)’</p></td>
</tr>
<tr class="row-even"><td><p>‘ea_kpa’</p></td>
<td><p>‘Vapor Pres (kPa)’</p></td>
</tr>
<tr class="row-odd"><td><p>‘prcp_mm’</p></td>
<td><p>‘Precip (mm)’</p></td>
</tr>
<tr class="row-even"><td><p>‘etr_mm’</p></td>
<td><p>‘Calc_ETr (mm)’</p></td>
</tr>
<tr class="row-odd"><td><p>‘eto_mm’</p></td>
<td><p>‘Calc_ETo (mm)’</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>If <code class="docutils literal notranslate"><span class="pre">--grid-var</span></code> is given from the default options, the corresponding
default station variable name will be looked up in the input station data
and used, otherwise you must assign both the gridMET name (from table above)
and station variable based on the variable names in your station time series
CSV file(s).</p>
<p>The required argument <code class="docutils literal notranslate"><span class="pre">INPUT_CSV</span></code> is the CSV file that is
produced by <code class="docutils literal notranslate"><span class="pre">prep-input</span></code> and <code class="docutils literal notranslate"><span class="pre">download-gridmet-opendap</span></code> or
<code class="docutils literal notranslate"><span class="pre">download-gridmet-ee</span></code>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gridwxcomp calc-bias-ratios <span class="o">[</span>OPTIONS<span class="o">]</span> INPUT_CSV
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-calc-bias-ratios-o">
<code class="sig-name descname">-o</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--out-dir</code><code class="sig-prename descclassname"> &lt;out_dir&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-calc-bias-ratios-o" title="Permalink to this definition">¶</a></dt>
<dd><p>Folder to save correction ratio summary CSV files</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-calc-bias-ratios-gin">
<code class="sig-name descname">-gin</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--grid-id-name</code><code class="sig-prename descclassname"> &lt;grid_id_name&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-calc-bias-ratios-gin" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of gridcell identifier, need to specify if using own grid</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-calc-bias-ratios-gv">
<code class="sig-name descname">-gv</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--grid-var</code><code class="sig-prename descclassname"> &lt;grid_var&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-calc-bias-ratios-gv" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of grid climatic variable, e.g. etr_mm</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-calc-bias-ratios-sv">
<code class="sig-name descname">-sv</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--station-var</code><code class="sig-prename descclassname"> &lt;station_var&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-calc-bias-ratios-sv" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of station climatic variable</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-calc-bias-ratios-sdn">
<code class="sig-name descname">-sdn</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--station-date-name</code><code class="sig-prename descclassname"> &lt;station_date_name&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-calc-bias-ratios-sdn" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of date column in station time series files</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-calc-bias-ratios-gdn">
<code class="sig-name descname">-gdn</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--grid-date-name</code><code class="sig-prename descclassname"> &lt;grid_date_name&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-calc-bias-ratios-gdn" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of date column in grid time series files</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-calc-bias-ratios-id">
<code class="sig-name descname">-id</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--grid-id</code><code class="sig-prename descclassname"> &lt;grid_id&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-calc-bias-ratios-id" title="Permalink to this definition">¶</a></dt>
<dd><p>grid ID for calculating ratios only for stations in that cell</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-calc-bias-ratios-d">
<code class="sig-name descname">-d</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--day-limit</code><code class="sig-prename descclassname"> &lt;day_limit&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-calc-bias-ratios-d" title="Permalink to this definition">¶</a></dt>
<dd><p>Monthly day threshold, if missing more exclude month from calc</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-calc-bias-ratios-y">
<code class="sig-name descname">-y</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--years</code><code class="sig-prename descclassname"> &lt;years&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-calc-bias-ratios-y" title="Permalink to this definition">¶</a></dt>
<dd><p>Year(s) to use, e.g. 2010 or 2000-2010</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-calc-bias-ratios-c">
<code class="sig-name descname">-c</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--comp</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-calc-bias-ratios-c" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag to NOT save comprehensive output CSV</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-calc-bias-ratios-quiet">
<code class="sig-name descname">--quiet</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-calc-bias-ratios-quiet" title="Permalink to this definition">¶</a></dt>
<dd><p>Supress command line output</p>
</dd></dl>

<p class="rubric">Arguments</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-calc-bias-ratios-arg-input-csv">
<code class="sig-name descname">INPUT_CSV</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-calc-bias-ratios-arg-input-csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

</div>
<div class="section" id="gridwxcomp-download-gridmet-opendap">
<h3><a class="toc-backref" href="#id19">gridwxcomp download-gridmet-opendap</a><a class="headerlink" href="#gridwxcomp-download-gridmet-opendap" title="Permalink to this headline">¶</a></h3>
<p>Download gridMET climate time series using <a class="reference external" href="https://www.opendap.org">OpeNDAP</a></p>
<p>Download gridMET time series for cells that are paired to climate stations
in a CSV file that is first created by <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span> <span class="pre">prep-input</span></code>. Options
allow for downloading all years available (default) or select years, it is
also possible to redownload data for specified year(s). If <code class="docutils literal notranslate"><span class="pre">--out-dir</span></code> is
not specified, gridMET time series CSVs are saved to a new directory named
“gridmet_data” within the current working directory.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gridwxcomp download-gridmet-opendap <span class="o">[</span>OPTIONS<span class="o">]</span> INPUT_CSV
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-download-gridmet-opendap-o">
<code class="sig-name descname">-o</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--out-dir</code><code class="sig-prename descclassname"> &lt;out_dir&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-download-gridmet-opendap-o" title="Permalink to this definition">¶</a></dt>
<dd><p>Folder to save downloaded gridMET time series</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-download-gridmet-opendap-y">
<code class="sig-name descname">-y</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--years</code><code class="sig-prename descclassname"> &lt;years&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-download-gridmet-opendap-y" title="Permalink to this definition">¶</a></dt>
<dd><p>Year(s) to download, single year (YYYY) or range (YYYY-YYYY)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-download-gridmet-opendap-u">
<code class="sig-name descname">-u</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--update-data</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-download-gridmet-opendap-u" title="Permalink to this definition">¶</a></dt>
<dd><p>Redownload existing data for given year(s)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-download-gridmet-opendap-quiet">
<code class="sig-name descname">--quiet</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-download-gridmet-opendap-quiet" title="Permalink to this definition">¶</a></dt>
<dd><p>Supress command line output</p>
</dd></dl>

<p class="rubric">Arguments</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-download-gridmet-opendap-arg-input-csv">
<code class="sig-name descname">INPUT_CSV</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-download-gridmet-opendap-arg-input-csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

</div>
<div class="section" id="gridwxcomp-spatial">
<h3><a class="toc-backref" href="#id20">gridwxcomp spatial</a><a class="headerlink" href="#gridwxcomp-spatial" title="Permalink to this headline">¶</a></h3>
<p>Spatially interpolate ratio statistics</p>
<p>2-D interpolation of mean bias ratios or other statistics that exist in the
<code class="docutils literal notranslate"><span class="pre">SUMMARY_COMP_CSV</span></code> file created by <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span> <span class="pre">calc-bias-ratios</span></code>.
Interpolation algorithms include those provided by <a class="reference external" href="https://www.gdal.org/gdal_grid.html">gdal_grid</a>:
‘invdist’ (default), ‘invdistnn’, ‘linear’, ‘average’, and ‘nearest’
and <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.Rbf.html#scipy.interpolate.Rbf" title="(in SciPy v1.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.interpolate.Rbf</span></code></a>: ‘multiquadric’, ‘inverse’, ‘gaussian’,
‘linear_rbf’, ‘cubic’, ‘quintic’, and ‘thin_plate’. Parameters for gdal
algorithms are set using <code class="docutils literal notranslate"><span class="pre">--params</span></code> whereas the <code class="docutils literal notranslate"><span class="pre">--smooth</span></code> parameter
(default 0) is used by scipy radial basis functions. Default parameters
for gdal are stored in <a class="reference internal" href="#gridwxcomp.InterpGdal.default_params" title="gridwxcomp.InterpGdal.default_params"><code class="xref py py-attr docutils literal notranslate"><span class="pre">gridwxcomp.InterpGdal.default_params</span></code></a>.</p>
<p>Interpolation resampling resolution can be down- or up-scaled using
<code class="docutils literal notranslate"><span class="pre">--scale-factor</span></code> (default 0.1) which is applied to gridMET resolution of
4 km.</p>
<p>On the first run this command will produce a fishnet of gridMET cells
that bound the climate stations in <code class="docutils literal notranslate"><span class="pre">SUMMARY_COMP_CSV</span></code> with optional
buffer of gridMET cells which can later be overwritten.</p>
<p>All mean bias ratios found within <a class="reference internal" href="#gridwxcomp.InterpGdal.default_layers" title="gridwxcomp.InterpGdal.default_layers"><code class="xref py py-attr docutils literal notranslate"><span class="pre">gridwxcomp.InterpGdal.default_layers</span></code></a>
are interpolated by default unless <code class="docutils literal notranslate"><span class="pre">--layers</span></code> are specified. Interpolated
residuals to station point ratios are also estimated. Zonal means for
gridMET cells in the fishnet grid are extracted by default and assigned to
each gridMET cell by its index (GRIDMET_ID) in the full gridMET fishnet
that covers the CONUS. In total interpolated rasters, station point
shapefiles, fishnet grid for zonal stats, and CSVs of bias ratios and zonal
statistics are all created and stored in a file structure that is explained
in <a class="reference internal" href="#gridwxcomp.spatial.make_grid" title="gridwxcomp.spatial.make_grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.spatial.make_grid</span></code></a>. and <a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.spatial.interpolate</span></code></a>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gridwxcomp spatial <span class="o">[</span>OPTIONS<span class="o">]</span> SUMMARY_COMP_CSV
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-o">
<code class="sig-name descname">-o</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--out</code><code class="sig-prename descclassname"> &lt;out&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-o" title="Permalink to this definition">¶</a></dt>
<dd><p>Subdirectory for saving interpolated rasters</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-l">
<code class="sig-name descname">-l</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--layer</code><code class="sig-prename descclassname"> &lt;layer&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-l" title="Permalink to this definition">¶</a></dt>
<dd><p>Layers to interpolate comma separated, e.g. Jan_mean,Aug_mean</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-gin">
<code class="sig-name descname">-gin</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--grid-id-name</code><code class="sig-prename descclassname"> &lt;grid_id_name&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-gin" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of gridcell integer ID, must specify if not using gridMET</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-b">
<code class="sig-name descname">-b</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--buffer</code><code class="sig-prename descclassname"> &lt;buffer&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-b" title="Permalink to this definition">¶</a></dt>
<dd><p>Buffer for expanding interpolation region (number of gridcells)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-s">
<code class="sig-name descname">-s</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--scale</code><code class="sig-prename descclassname"> &lt;scale&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-s" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale factor for gridMET interpolation, applied to 4 km res</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-f">
<code class="sig-name descname">-f</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--function</code><code class="sig-prename descclassname"> &lt;function&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-f" title="Permalink to this definition">¶</a></dt>
<dd><p>Algorithm name for spatial interpolation</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-smooth">
<code class="sig-name descname">--smooth</code><code class="sig-prename descclassname"> &lt;smooth&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-smooth" title="Permalink to this definition">¶</a></dt>
<dd><p>Smoothing parameter for radial basis funciton interpolation</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-p">
<code class="sig-name descname">-p</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--params</code><code class="sig-prename descclassname"> &lt;params&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-p" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameters for gdal_grid interpolation e.g. :power=2:smooth=0</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-grid-res">
<code class="sig-name descname">--grid-res</code><code class="sig-prename descclassname"> &lt;grid_res&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-grid-res" title="Permalink to this definition">¶</a></dt>
<dd><p>Grid resolution in decimal degrees if not using gridMET</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-z">
<code class="sig-name descname">-z</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--no-zonal-stats</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-z" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag to NOT extract zonal means of interpolated results</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-overwrite-grid">
<code class="sig-name descname">--overwrite-grid</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-overwrite-grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag to overwrite grid for zonal stats if already exists</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-r">
<code class="sig-name descname">-r</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--no-resid-plot</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-r" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag to NOT plot station residuals between observed and interpolated data for layer</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-options">
<code class="sig-name descname">--options</code><code class="sig-prename descclassname"> &lt;options&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-options" title="Permalink to this definition">¶</a></dt>
<dd><p>Extra command line arguments for gdal_grid interpolation</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-gm">
<code class="sig-name descname">-gm</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--grid-meta</code><code class="sig-prename descclassname"> &lt;grid_meta&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-gm" title="Permalink to this definition">¶</a></dt>
<dd><p>file path to gridcell metadata if not using gridMET</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-quiet">
<code class="sig-name descname">--quiet</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-quiet" title="Permalink to this definition">¶</a></dt>
<dd><p>Supress command line output</p>
</dd></dl>

<p class="rubric">Arguments</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-arg-summary-comp-csv">
<code class="sig-name descname">SUMMARY_COMP_CSV</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-arg-summary-comp-csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

</div>
<div class="section" id="gridwxcomp-plot">
<h3><a class="toc-backref" href="#id21">gridwxcomp plot</a><a class="headerlink" href="#gridwxcomp-plot" title="Permalink to this headline">¶</a></h3>
<p>Create comparison or diagnostic graphics</p>
<p>Plot time series and scatter comparison plots between station and gridMET
paired variables at daily or monthly average time periods. Also allows for
plotting a single variable as a bar plot that compares multiple climate
stations. Plots are interactive (can be panned, zoomed, etc.) HTML files.</p>
<p>Currently there are two major plot types provided which are specified by
<code class="docutils literal notranslate"><span class="pre">[-t,</span> <span class="pre">--plot-type]</span></code>: 1) “station-grid-comp” which creates time series
comparison plots of all gridMET variables to station values; and 2)
the second type “station-bar” which compares stations for a single variable.
For time series comparisons a plot is created for each station if time
frequency of plots, i.e. <code class="docutils literal notranslate"><span class="pre">--freq</span></code> is “monthly” and for each month for
each station if <code class="docutils literal notranslate"><span class="pre">--freq</span></code> is “daily” (default). For producing a station
bar plot you must assign the variable to plot using <code class="docutils literal notranslate"><span class="pre">[-v,</span> <span class="pre">--variable]</span></code>.</p>
<p>By default, if <code class="docutils literal notranslate"><span class="pre">--out-dir</span></code> is not specified time series plots are saved
in “[freq]_comp_plots” in the current directory where [freq] is set to
<code class="docutils literal notranslate"><span class="pre">--freq</span></code>. Station bar plots are saved by default to “station_bar_plots”
directory created in the same directory containing the summary CSV assigned
to <code class="docutils literal notranslate"><span class="pre">INPUT_CSV</span></code>.</p>
<p><strong>Note:</strong>
Both daily and monthly comparison plots between station and gridMET
i.e. when <code class="docutils literal notranslate"><span class="pre">plot-type</span></code> = “station-grid-comp” require station data to
be within excel files that follow the format produced by
<a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">PyWeatherQAQC</a>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gridwxcomp plot <span class="o">[</span>OPTIONS<span class="o">]</span> INPUT_CSV
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-t">
<code class="sig-name descname">-t</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--plot-type</code><code class="sig-prename descclassname"> &lt;plot_type&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-t" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot type, station comparison bar plot “station-bar” for a single variable, or station to gridMET time series comparison for multiple variables “station-grid-comp”</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-v">
<code class="sig-name descname">-v</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--variable</code><code class="sig-prename descclassname"> &lt;variable&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-v" title="Permalink to this definition">¶</a></dt>
<dd><p>Variable to plot for –type=”station-bar” plots, default “annual_mean”, can also pass a comma separated list: e.g. “Jan_mean,Jan_res,Jan_est”</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-f">
<code class="sig-name descname">-f</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--freq</code><code class="sig-prename descclassname"> &lt;freq&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-f" title="Permalink to this definition">¶</a></dt>
<dd><p>Time frequency for station-grid-comp plots “daily” or “monthly”</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-o">
<code class="sig-name descname">-o</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--out-dir</code><code class="sig-prename descclassname"> &lt;out_dir&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-o" title="Permalink to this definition">¶</a></dt>
<dd><p>Folder to save plots</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-y">
<code class="sig-name descname">-y</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--year</code><code class="sig-prename descclassname"> &lt;year&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-y" title="Permalink to this definition">¶</a></dt>
<dd><p>Years for time series, single year YYYY or range YYYY-YYYY</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-x-label">
<code class="sig-name descname">--x-label</code><code class="sig-prename descclassname"> &lt;x_label&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-x-label" title="Permalink to this definition">¶</a></dt>
<dd><p>X-axis label for station-bar plot</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-y-label">
<code class="sig-name descname">--y-label</code><code class="sig-prename descclassname"> &lt;y_label&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-y-label" title="Permalink to this definition">¶</a></dt>
<dd><p>Y-axis label for station-bar plot</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-title">
<code class="sig-name descname">--title</code><code class="sig-prename descclassname"> &lt;title&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-title" title="Permalink to this definition">¶</a></dt>
<dd><p>Title for station-bar plot</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-subtitle">
<code class="sig-name descname">--subtitle</code><code class="sig-prename descclassname"> &lt;subtitle&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-subtitle" title="Permalink to this definition">¶</a></dt>
<dd><p>Subtitle for station-bar plot, comma separated list for multiple</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-year-subtitle">
<code class="sig-name descname">--year-subtitle</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-year-subtitle" title="Permalink to this definition">¶</a></dt>
<dd><p>Print subtitle with years used for station-bar plots</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-quiet">
<code class="sig-name descname">--quiet</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-quiet" title="Permalink to this definition">¶</a></dt>
<dd><p>Supress command line output</p>
</dd></dl>

<p class="rubric">Arguments</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-arg-input-csv">
<code class="sig-name descname">INPUT_CSV</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-arg-input-csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

</div>
</div>
<div class="section" id="python-functions-classes-and-modules">
<h2><a class="toc-backref" href="#id22">Python functions, classes, and modules</a><a class="headerlink" href="#python-functions-classes-and-modules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="prep-input">
<h3><a class="toc-backref" href="#id23">prep_input</a><a class="headerlink" href="#prep-input" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="gridwxcomp.prep_input">
<code class="sig-prename descclassname">gridwxcomp.</code><code class="sig-name descname">prep_input</code><span class="sig-paren">(</span><em class="sig-param">station_path</em>, <em class="sig-param">out_path='merged_input.csv'</em>, <em class="sig-param">grid_meta_path=None</em>, <em class="sig-param">grid_path=None</em>, <em class="sig-param">grid_id_name=None</em>, <em class="sig-param">grid_data_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/prep_input.html#prep_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.prep_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Read list of climate stations and match each with its closest gridcell,
save CSV with information from both.</p>
<p>Station time series files must be in the same directory as <cite>station_path</cite>
metadata file and each file must begin with the name specifed as ‘Station’
in the station metadata file.</p>
<p>If using gridded data other than gridMET this function may be used to
create a metadata CSV file of cell data for any arbitrary rectangular grid.
The grid must be passed to <code class="docutils literal notranslate"><span class="pre">grid_path</span></code> and it must contain a cell
identifier attribute (name must be passed in as <code class="docutils literal notranslate"><span class="pre">grid_id_name</span></code>) that is
an integer which increases monotonically by steps of 1 without gaps,
e.g. 1,2,3,4,… although the cell order does not have to follow any rule.
For example, the first cell may be in any location and the next may be
anywhere and so forth. Also if using a different grid, the time series
files associated with the cell IDs that match your station locations
should be in the directory given as <code class="docutils literal notranslate"><span class="pre">grid_data_dir</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>station_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to CSV file containing metadata of climate
stations that will later be used to calculate bias ratios to
GridMET.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>out_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to save output CSV, default is to save as
‘merged_input.csv’ to current working directory.</p></li>
<li><p><strong>grid_meta_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Path to save grid metadata
CSV, if None save to “grid_cell_data.csv” in current directory. This
is only used if working with a user provided gridded dataset, i.e.
if <cite>grid_path</cite> and <cite>grid_id_name</cite> (if creating a new grid meta file
are given.</p></li>
<li><p><strong>grid_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to grid vector file if not using gridMET.</p></li>
<li><p><strong>grid_id_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – name of gridcell identifier present in grid,
ID data values should be integers.</p></li>
<li><p><strong>grid_data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – directory that contains grid time series files,
each file should have the integer grid ID value in its name and
should be in CSV format. Only used when gridded time series data
already exists on disk.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">prep_input</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prep_input</span><span class="p">(</span><span class="s1">&#39;gridwxcomp/example_data/Station_Data.txt&#39;</span><span class="p">,</span><span class="s1">&#39;outfile.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>outfile.csv will be created containing station and corresponding
gridMET cell data. This file is later used as input for
<a class="reference internal" href="#gridwxcomp.download_gridmet_opendap" title="gridwxcomp.download_gridmet_opendap"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.download_gridmet_opendap</span></code></a> and
<a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Make sure the following column headers exist in your input station
metadata file (<code class="docutils literal notranslate"><span class="pre">station_path</span></code>) and are spelled exactly:</p>
<blockquote>
<div><ul class="simple">
<li><p>Latitude</p></li>
<li><p>Longitude</p></li>
<li><p>Station</p></li>
<li><p>Filename</p></li>
</ul>
</div></blockquote>
<p>Also, the “Filename” column should have names that begin with the names
of climate time series files that should be in the same directory as
the station metadata file. For example, if one of the time series files
is named “Bluebell_daily_data.csv” then all of the following are
permissiable entries as the “Filename”: “Bluebell”, “Bluebell_daily”,
or “Bluebell_daily_data.csv”.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.8)"><strong>FileNotFoundError</strong></a> – if the <code class="docutils literal notranslate"><span class="pre">grid_meta_path</span></code> is not passed as a
    command line argument and it is not in the current working directory
    and named “gridmet_cell_data.csv” (i.e. if other grid data is not
    given) and if <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code> was not installed to the user’s PATH,
    i.e. pip or python setup.py install.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if one or more of the following mandatory columns are
    missing from the input CSV file (<code class="docutils literal notranslate"><span class="pre">station_path</span></code> parameter):
    ‘Longitude’, ‘Latitude’, ‘Station’, or ‘Filename’.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If climate station time series files do <strong>NOT</strong> follow the format
created by <a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">pyWeatherQAQC</a>
i.e. microsoft excel files with data stored in a tab named ‘Corrected Data’.
Then station files should be in text (CSV) format with a column
containing datetime strings e.g. ‘12/01/2018’, that are
able to be parsed by Pandas. The CSV file produced by <a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-func docutils literal notranslate"><span class="pre">prep_input</span></code></a>
contains latitude, longitude, and other fields for both the station
and nearest gridcell centroid coordinates. Fields that may refer
to both grid and station data have prefixes to distinguish, the
climate station data are prefixed with ‘STATION’ and those refering
to grid data have no prefix.</p>
</div>
</dd></dl>

</div>
<div class="section" id="download-gridmet-opendap">
<h3><a class="toc-backref" href="#id24">download_gridmet_opendap</a><a class="headerlink" href="#download-gridmet-opendap" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="gridwxcomp.download_gridmet_opendap">
<code class="sig-prename descclassname">gridwxcomp.</code><code class="sig-name descname">download_gridmet_opendap</code><span class="sig-paren">(</span><em class="sig-param">input_csv</em>, <em class="sig-param">out_folder</em>, <em class="sig-param">year_filter=''</em>, <em class="sig-param">update_data=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/download_gridmet_opendap.html#download_gridmet_opendap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.download_gridmet_opendap" title="Permalink to this definition">¶</a></dt>
<dd><p>Download gridMET time series data for multiple climate variables for
select gridMET cells as listed in <code class="docutils literal notranslate"><span class="pre">input_csv</span></code>. Uses <a class="reference external" href="https://www.opendap.org">OpeNDAP</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – file path of input CSV produced by
<code class="xref py py-mod docutils literal notranslate"><span class="pre">prep_input.py</span></code></p></li>
<li><p><strong>out_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – directory path to save gridmet timeseries CSV files</p></li>
<li><p><strong>year_filter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a>) – default ‘’. Single year or range to download</p></li>
<li><p><strong>update_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – default False. Re-download existing data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Say we wanted to download data for 2016 through 2018, from the command
line,</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ download_gridmet_opendap.py -i merged_input.csv -o gridmet_data -y <span class="m">2016</span>-2018
</pre></div>
</div>
<p>note, “merged_input.csv” should have been created by first running
<code class="xref py py-mod docutils literal notranslate"><span class="pre">prep_input.py</span></code>. If the <code class="docutils literal notranslate"><span class="pre">[-y,</span> <span class="pre">--years]</span></code> option is note given
the default behaviour is to download gridMET data from 1979 up through
yesterday.</p>
<p>If the data for 2018 has changed since the last run or for debugging
purposes you can re-download data for all or select years with the
<code class="docutils literal notranslate"><span class="pre">[-u,</span> <span class="pre">--update-data]</span></code> option</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ download_gridmet_opendap.py -i merged_input.csv -o gridmet_data -y <span class="m">2018</span> -u
</pre></div>
</div>
<p>To download the same gridMET data within Python</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">download_gridmet_opendap</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download_gridmet_opendap</span><span class="p">(</span><span class="s1">&#39;merged_input.csv&#39;</span><span class="p">,</span>
<span class="go">        &#39;gridmet_data&#39;,</span>
<span class="go">        &#39;2016-2018&#39;</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Running <code class="xref py py-func docutils literal notranslate"><span class="pre">download_gridmet_opendap.py</span></code> also updates the CSV file
produced from <code class="xref py py-mod docutils literal notranslate"><span class="pre">prep_input.py</span></code> to include file paths to gridMET
time series files that are paired with climate stations.</p>
</dd></dl>

</div>
<div class="section" id="module-gridwxcomp.calc_bias_ratios">
<span id="calc-bias-ratios"></span><h3><a class="toc-backref" href="#id25">calc_bias_ratios</a><a class="headerlink" href="#module-gridwxcomp.calc_bias_ratios" title="Permalink to this headline">¶</a></h3>
<p>Calculate monthly bias ratios of variables from climate station
to overlapping gridMET (or other gridded dataset) cells.</p>
<p>Input file for this module must first be created by running
<a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.prep_input</span></code></a> followed by <a class="reference internal" href="#gridwxcomp.download_gridmet_opendap" title="gridwxcomp.download_gridmet_opendap"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.download_gridmet_opendap</span></code></a>.</p>
<dl class="attribute">
<dt id="gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS">
<code class="sig-prename descclassname">gridwxcomp.calc_bias_ratios.</code><code class="sig-name descname">GRIDMET_STATION_VARS</code><a class="headerlink" href="#gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS" title="Permalink to this definition">¶</a></dt>
<dd><p>mapping dictionary with gridMET
variable names as keys and station variable names as values.
Used to determine which station variable to calculate bias
ratios according to the given gridMET variable.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a></p>
</dd>
</dl>
</dd></dl>

<p>Default values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GRIDMET_STATION_VARS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;u2_ms&#39;</span> <span class="p">:</span> <span class="s1">&#39;ws_2m (m/s)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tmin_c&#39;</span> <span class="p">:</span> <span class="s1">&#39;TMin (C)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tmax_c&#39;</span> <span class="p">:</span> <span class="s1">&#39;TMax (C)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;srad_wm2&#39;</span> <span class="p">:</span> <span class="s1">&#39;Rs (w/m2)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ea_kpa&#39;</span> <span class="p">:</span> <span class="s1">&#39;Vapor Pres (kPa)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;prcp_mm&#39;</span> <span class="p">:</span> <span class="s1">&#39;Precip (mm)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;etr_mm&#39;</span> <span class="p">:</span> <span class="s1">&#39;ETr (mm)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;eto_mm&#39;</span> <span class="p">:</span> <span class="s1">&#39;ETo (mm)&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="simple">
<dt>Note: The module attribute <code class="docutils literal notranslate"><span class="pre">GRIDMET_STATION_VARS</span></code> can be manually adjusted,</dt><dd><p>if <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code> is installed in editable mode or used as scripts from the
root directory. New pairs of station-to-grid variables can then be made
or removed to efficiently use <code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp</span></code> on station data that was
<strong>not</strong> created by <a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">PyWeatherQAQC</a>.  Otherwise, the same can be
achieved by the <code class="docutils literal notranslate"><span class="pre">var_dict</span></code> or <code class="docutils literal notranslate"><span class="pre">grid_var</span></code> and <code class="docutils literal notranslate"><span class="pre">station_var</span></code> arguments
to <a class="reference internal" href="#gridwxcomp.calc_bias_ratios.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">calc_bias_ratios</span></code></a>.</p>
</dd>
</dl>
<dl class="function">
<dt id="gridwxcomp.calc_bias_ratios.calc_bias_ratios">
<code class="sig-prename descclassname">gridwxcomp.calc_bias_ratios.</code><code class="sig-name descname">calc_bias_ratios</code><span class="sig-paren">(</span><em class="sig-param">input_path</em>, <em class="sig-param">out_dir</em>, <em class="sig-param">grid_id_name='GRIDMET_ID'</em>, <em class="sig-param">grid_var='etr_mm'</em>, <em class="sig-param">station_var=None</em>, <em class="sig-param">var_dict=None</em>, <em class="sig-param">station_date_name='date'</em>, <em class="sig-param">grid_date_name='date'</em>, <em class="sig-param">grid_ID=None</em>, <em class="sig-param">day_limit=10</em>, <em class="sig-param">years='all'</em>, <em class="sig-param">comp=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/calc_bias_ratios.html#calc_bias_ratios"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.calc_bias_ratios.calc_bias_ratios" title="Permalink to this definition">¶</a></dt>
<dd><p>Read input CSV file and calculate mean monthly bias ratios between
station to corresponding grid cells for all station and grid
pairs, optionally calculate ratios for a single gridcell.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to input CSV file with matching
station climate and grid metadata. This file is
created by running <a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.prep_input</span></code></a> followed by
<a class="reference internal" href="#gridwxcomp.download_gridmet_opendap" title="gridwxcomp.download_gridmet_opendap"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.download_gridmet_opendap</span></code></a>.</p></li>
<li><p><strong>out_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to directory to save CSV files with
monthly bias ratios of etr.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>grid_var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – default ‘etr_mm’. Grid climate variable
to calculate bias ratios.</p></li>
<li><p><strong>station_var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – default None. Climate station variable to use
to calculate bias ratios. If None, look up using <code class="docutils literal notranslate"><span class="pre">grid_var</span></code>
as a key to <a class="reference internal" href="#gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS" title="gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GRIDMET_STATION_VARS</span></code></a> dictionary found as a
module attribute to <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p></li>
<li><p><strong>var_dict</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – default None. Dictionary that maps grid variable names
to station variable names to overide gridMET and PyWeatherQaQc
defaules used by <a class="reference internal" href="#gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS" title="gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GRIDMET_STATION_VARS</span></code></a>.</p></li>
<li><p><strong>grid_ID</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – default None. Grid ID (int cell identifier) to only
calculate bias ratios for a single gridcell.</p></li>
<li><p><strong>day_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – default 10. Threshold number of days in month
of missing data, if less exclude month from calculations.</p></li>
<li><p><strong>years</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – default ‘all’. Years to use for calculations
e.g. 2000-2005 or 2011.</p></li>
<li><p><strong>comp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – default True. Flag to save a “comprehensive”
summary output CSV file that contains station metadata and
statistics in addition to the mean monthly ratios.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>To use within Python for observed ET,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">calc_bias_ratios</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_path</span> <span class="o">=</span> <span class="s1">&#39;merged_input.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out_dir</span> <span class="o">=</span> <span class="s1">&#39;monthly_ratios&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grid_variable</span> <span class="o">=</span> <span class="s1">&#39;eto_mm&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calc_bias_ratios</span><span class="p">(</span><span class="n">input_path</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">,</span> <span class="n">grid_var</span><span class="o">=</span><span class="n">grid_variable</span><span class="p">)</span>
</pre></div>
</div>
<p>To use custom station data, give the keyword argument <code class="docutils literal notranslate"><span class="pre">station_var</span></code>,
e.g. if we had climate daily time series data for precipitation
with the column named “p” then,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_bias_ratios</span><span class="p">(</span><span class="n">input_path</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">,</span> <span class="n">grid_var</span><span class="o">=</span><span class="s1">&#39;prcp_mm&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">station_var</span><span class="o">=</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This results in two CSV files in <code class="docutils literal notranslate"><span class="pre">out_dir</span></code> named
“prcp_mm_summary_all_yrs.csv” and “prcp_mm_summary_comp_all_yrs.csv”.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.8)"><strong>FileNotFoundError</strong></a> – if input file is invalid or not found.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if the input file does not contain file paths to
    the climate station and grid time series files. This
    occurs if, for example, the <a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.prep_input</span></code></a> and/or
    <a class="reference internal" href="#gridwxcomp.download_gridmet_opendap" title="gridwxcomp.download_gridmet_opendap"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.download_gridmet_opendap</span></code></a> scripts have not been
    run first (if using gridMET data). Also raised if the given
    <code class="docutils literal notranslate"><span class="pre">grid_var</span></code>, <code class="docutils literal notranslate"><span class="pre">station_var</span></code>, or values of <code class="docutils literal notranslate"><span class="pre">var_dict</span></code> kwargs
    are invalid.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If an existing summary file contains a climate station that is being
reprocessed its monthly bias ratios and other data will be overwritten.
Also, to proceed with spatial analysis scripts, the comprehensive
summary file must be produced using this function first. If
<code class="docutils literal notranslate"><span class="pre">grid_var</span></code> keyword argument is given but the <code class="docutils literal notranslate"><span class="pre">station_var</span></code> is
left as default (None), the corresponding station variable is looked
up from the mapping dictionary in <code class="xref py py-mod docutils literal notranslate"><span class="pre">calc_bias_ratios.py</span></code>
named <a class="reference internal" href="#gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS" title="gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GRIDMET_STATION_VARS</span></code></a>. To use climate data
that was  <strong>not</strong> created by <a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">pyWeatherQAQC</a>
for station data and/or gridded data other than gridMET, which is
where the default names are derived, the grid and station
variable names need to be explicitly passed as function arguments.</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-gridwxcomp.spatial">
<span id="spatial"></span><h3><a class="toc-backref" href="#id26">spatial</a><a class="headerlink" href="#module-gridwxcomp.spatial" title="Permalink to this headline">¶</a></h3>
<p>Perform multiple workflows needed to estimate the spatial surface (and
other related outputs) of monthly and annual station-to-grid bias ratios for
meteorological variables. The input file is first created by
<a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p>
<dl class="attribute">
<dt id="gridwxcomp.spatial.GRIDMET_RES">
<code class="sig-prename descclassname">gridwxcomp.spatial.</code><code class="sig-name descname">GRIDMET_RES</code><a class="headerlink" href="#gridwxcomp.spatial.GRIDMET_RES" title="Permalink to this definition">¶</a></dt>
<dd><p>constant gridMET cell size in decimal degrees,
value = 0.041666666666666664.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)">float</a></p>
</dd>
</dl>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All spatial files, i.e. vector and raster files, utilize the
<em>ESRI Shapefile</em> or GeoTiff format.</p>
</div>
<dl class="function">
<dt id="gridwxcomp.spatial.make_points_file">
<code class="sig-prename descclassname">gridwxcomp.spatial.</code><code class="sig-name descname">make_points_file</code><span class="sig-paren">(</span><em class="sig-param">in_path</em>, <em class="sig-param">grid_id_name='GRIDMET_ID'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/spatial.html#make_points_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.spatial.make_points_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create vector shapefile of points with monthly mean bias ratios
for climate stations using all stations found in a comprehensive
CSV file created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>in_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to [var]_summary_comp.CSV file containing
monthly bias ratios, lat, long, and other data. Shapefile
“[var]_summary_pts.shp” is saved to parent directory of
<code class="docutils literal notranslate"><span class="pre">in_path</span></code> under “spatial” subdirectory.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Create shapefile containing point data for all climate stations
in input summary file created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">spatial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># path to comprehensive summary CSV</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_file</span> <span class="o">=</span> <span class="s1">&#39;monthly_ratios/etr_mm_summary_comp_all_yrs.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spatial</span><span class="o">.</span><span class="n">make_points_file</span><span class="p">(</span><span class="n">summary_file</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is the file “etr_mm_summary_pts.shp” being saved to
a subdirectory created in the directory containing <code class="docutils literal notranslate"><span class="pre">in_path</span></code>
named “spatial”, i.e.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;monthly_ratios/spatial/etr_mm_summary_pts.shp&quot;</span><span class="o">.</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.8)"><strong>FileNotFoundError</strong></a> – if input summary CSV file is not found.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#gridwxcomp.spatial.make_points_file" title="gridwxcomp.spatial.make_points_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_points_file</span></code></a> will overwrite any existing point
shapefile of the same climate variable.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gridwxcomp.spatial.get_subgrid_bounds">
<code class="sig-prename descclassname">gridwxcomp.spatial.</code><code class="sig-name descname">get_subgrid_bounds</code><span class="sig-paren">(</span><em class="sig-param">in_path</em>, <em class="sig-param">buffer</em>, <em class="sig-param">grid_res=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/spatial.html#get_subgrid_bounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.spatial.get_subgrid_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate bounding box for spatial interpolation grid from
comprehensive summary CSV file containing monthly bias ratios
and station locations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to comprehensive summary file containing
monthly bias ratios, created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p></li>
<li><p><strong>buffer</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – number of gridMET cells to expand the rectangular extent
of the subgrid fishnet.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>tuple with coordinates in decimal degrees that</dt><dd><p>define the outer bounds of the subgrid fishnet in the format
(min long, max long, min lat, max lat)</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bounds (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)">tuple</a>)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.8)"><strong>FileNotFoundError</strong></a> – if input summary CSV file is not found.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By expanding the grid to a larger area encompassing the climate
stations of interest <a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">interpolate</span></code></a> can be used to extrapolate
passed the bounds of the outer station locations.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gridwxcomp.spatial.make_grid">
<code class="sig-prename descclassname">gridwxcomp.spatial.</code><code class="sig-name descname">make_grid</code><span class="sig-paren">(</span><em class="sig-param">in_path</em>, <em class="sig-param">bounds=None</em>, <em class="sig-param">buffer=25</em>, <em class="sig-param">overwrite=False</em>, <em class="sig-param">grid_id_name='GRIDMET_ID'</em>, <em class="sig-param">grid_meta_path=None</em>, <em class="sig-param">grid_res=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/spatial.html#make_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.spatial.make_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Make fishnet grid (vector file of polygon geometry) for
select gridcells based on bounding coordinates.</p>
<p>Add grid ID values to each cell based on their centroid. If using gridMET,
lookup in <code class="docutils literal notranslate"><span class="pre">gridwxcomp/gridmet_cell_data.csv</span></code>. Assigns the
WGS84 reference coordinate system. The grid is later used to
spatially interpolate point data. Modified from the
<a class="reference external" href="https://pcjericks.github.io/py-gdalogr-cookbook/vector_layers.html#create-fishnet-grid">Python GDAL/OGR Cookbook</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>in_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to [var]_summary_comp_[years].csv file containing
monthly bias ratios, lat, long, and other data. Created by
<a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Tuple of bounding coordinates
in the following order (min long, max long, min lat, max lat)
which need to be in decimal degrees. Need to align with grid
resolution outer corners. If None, get extent from centoid
locations of climate stations in <code class="docutils literal notranslate"><span class="pre">in_path</span></code> summary CSV.</p></li>
<li><p><strong>buffer</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – default 25. Number of gridcells to expand
the rectangular extent of the subgrid fishnet and interpolated
output raster.</p></li>
<li><p><strong>overwrite</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – default False. If True overwrite the grid
shapefile at <code class="docutils literal notranslate"><span class="pre">out_path</span></code> if it already exists.</p></li>
<li><p><strong>grid_id_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – default “GRIDMET_ID”. Name of gridcell identifier
if using a non-gridMET gridded dataset.</p></li>
<li><p><strong>grid_meta_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – default None. Path to metadata CSV file
that contains all grid cells. If None it is looked for at the
install directory of gridwxcomp (i.e. with pip install) or within
the current directory as “gridmet_cell_data.csv”. Only needed when
using a gridded product other than the default gridMET.</p></li>
<li><p><strong>grid_res</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – default None. Cell size of grid in decimal degrees
if using a grid that is not gridMET.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Build a fishnet uniform grid that matches gridMET cells around
climate stations found in <code class="docutils literal notranslate"><span class="pre">in_path</span></code> summary CSV file with a
25 cell buffer.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">spatial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># assign input paths</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_file</span> <span class="o">=</span> <span class="s1">&#39;monthly_ratios/etr_mm_summary_comp_all_yrs.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># make fishnet of gridMET cells for interpolation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spatial</span><span class="o">.</span><span class="n">make_grid</span><span class="p">(</span><span class="n">summary_file</span><span class="p">)</span>
</pre></div>
</div>
<p>The file will be saved as “grid.shp” to a newly created subdirectory
“spatial” in the same directory as the input summary CSV file. i.e.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>monthly_ratios/
├── etr_mm_summary_all_yrs.csv
├── etr_mm_summary_comp_all_yrs.csv
└── spatial/
    ├── grid.cpg
    ├── grid.dbf
    ├── grid.prj
    ├── grid.shp
    └── grid.shx
</pre></div>
</div>
<p>To use a smaller buffer to the extent of the grid assign the
<code class="docutils literal notranslate"><span class="pre">buffer</span></code> keyword argument</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spatial</span><span class="o">.</span><span class="n">make_grid</span><span class="p">(</span><span class="n">summary_file</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>If the grid file already exists the default action is to not
overwrite. To overwrite an existing grid if, for example, you
are working with a new set of climate stations as input, then
set the <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> keyword argument to True.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spatial</span><span class="o">.</span><span class="n">make_grid</span><span class="p">(</span><span class="n">summary_file</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.8)"><strong>FileNotFoundError</strong></a> – if input summary CSV file is not found.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If cells in the fishnet grid lie outside of the gridMET master
fishnet for the contiguous U.S., the grid ID (<code class="docutils literal notranslate"><span class="pre">grid_id_name</span></code>) will
be assigned to -999.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gridwxcomp.spatial.interpolate">
<code class="sig-prename descclassname">gridwxcomp.spatial.</code><code class="sig-name descname">interpolate</code><span class="sig-paren">(</span><em class="sig-param">in_path</em>, <em class="sig-param">layer='all'</em>, <em class="sig-param">out=None</em>, <em class="sig-param">scale_factor=0.1</em>, <em class="sig-param">function='invdist'</em>, <em class="sig-param">smooth=0</em>, <em class="sig-param">params=None</em>, <em class="sig-param">bounds=None</em>, <em class="sig-param">buffer=25</em>, <em class="sig-param">z_stats=True</em>, <em class="sig-param">res_plot=True</em>, <em class="sig-param">grid_id_name='GRIDMET_ID'</em>, <em class="sig-param">grid_res=None</em>, <em class="sig-param">options=None</em>, <em class="sig-param">grid_meta_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/spatial.html#interpolate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.spatial.interpolate" title="Permalink to this definition">¶</a></dt>
<dd><p>Use various methods to interpolate a 2-dimensional surface of
calculated bias ratios or other statistics for station/gridMET
pairs found in input comprehensive summary CSV.</p>
<p>Options allow for modifying down- or up-scaling the resolution of the
resampling grid and to select from multiple interpolation methods.
Interploated surfaces are saved as GeoTIFF rasters. Zonal statistics
using <a class="reference internal" href="#gridwxcomp.spatial.zonal_stats" title="gridwxcomp.spatial.zonal_stats"><code class="xref py py-func docutils literal notranslate"><span class="pre">zonal_stats</span></code></a> are also extracted to gridMET cells in
the fishnet grid built first by <a class="reference internal" href="#gridwxcomp.spatial.make_grid" title="gridwxcomp.spatial.make_grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_grid</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>in_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to [var]_summary_comp_[years].csv file containing
monthly bias ratios, lat, long, and other data. Created by
<a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>layer</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a>) – default ‘all’. Name of variable(s) in <code class="docutils literal notranslate"><span class="pre">in_path</span></code>
to conduct 2-D interpolation. e.g. ‘Annual_mean’.</p></li>
<li><p><strong>out</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – default None. Subdirectory to save GeoTIFF raster(s).</p></li>
<li><p><strong>scale_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – default 0.1. Scaling factor to apply to
original grid resolution to create resampling resolution. If
scale_factor = 0.1, the resolution will be one tenth gridMET
resolution or 400 m.</p></li>
<li><p><strong>function</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – <p>default ‘invdist’. Interpolation method, gdal
methods include: ‘invdist’, ‘indistnn’, ‘linear’, ‘average’,
and ‘nearest’ see <a class="reference external" href="https://www.gdal.org/gdal_grid.html">gdal_grid</a>.
Radial basis functions, see <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.Rbf.html#scipy.interpolate.Rbf" title="(in SciPy v1.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.interpolate.Rbf</span></code></a>,
include: ‘multiquadric’, ‘inverse’, ‘gaussian’, ‘linear_rbf’,
‘cubic’, ‘quintic’, and ‘thin_plate’.</p>
</p></li>
<li><p><strong>smooth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – default 0. Smooth parameter for Rbf functions.</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Parameters for interpolation
using gdal, see defaults in <a class="reference internal" href="#gridwxcomp.InterpGdal" title="gridwxcomp.InterpGdal"><code class="xref py py-class docutils literal notranslate"><span class="pre">gridwxcomp.InterpGdal</span></code></a>.</p></li>
<li><p><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Tuple of bounding coordinates
in the following order (min long, max long, min lat, max lat)
which need to be in decimal degrees. Need to align with gridMET
resolution outer corners. If None, get extent from centoid
locations of climate stations in <code class="docutils literal notranslate"><span class="pre">in_path</span></code> summary CSV.</p></li>
<li><p><strong>buffer</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – default 25. Number of grid cells to expand
the rectangular extent of the subgrid fishnet and interpolated
output raster.</p></li>
<li><p><strong>z_stats</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – default True. Calculate zonal means of interpolated
surface to gridMET cells in fishnet and save to a CSV file.
The CSV file will be saved to the same directory as the interpolated
raster file(s).</p></li>
<li><p><strong>res_plot</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – default True. Make bar plot for residual (error)
between interpolated and station value for <code class="docutils literal notranslate"><span class="pre">layer</span></code>.</p></li>
<li><p><strong>grid_id_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – default “GRIDMET_ID”. Name of gridcell identifier
if using a grid that is not gridMET.</p></li>
<li><p><strong>grid_res</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – default None. Grid resolution in decimal degrees if
not using gridMET as the gridded dataset.</p></li>
<li><p><strong>options</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Extra command line arguments
for gdal interpolation.</p></li>
<li><p><strong>grid_meta_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Path to metadata CSV
file that contains all gridcells. If None it is looked for at the
install directory of gridwxcomp (e.g. after pip install gridwxcomp)
or within the current directory as ‘gridmet_cell_data.csv’. Only
used when using a gridded product other than the default gridMET.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Let’s say we wanted to interpolate the “Annual_mean” bias
ratio in an input CSV first created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a> and a fishnet
grid was first created by <a class="reference internal" href="#gridwxcomp.spatial.make_grid" title="gridwxcomp.spatial.make_grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_grid</span></code></a>. This example uses the
“invdist” method (default) to interpolate to a 400 m resolution
surface. The result is a GeoTIFF raster that has an extent that
encompasses station locations in the input file plus an additional
optional buffer of outer gridMET cells. Additionally, point residuals
of bias ratios are added to CSV and newly created point shapefiles,
zonal (gridMET cell) means are also extracted and stored in a CSV.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">spatial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_file</span> <span class="o">=</span> <span class="s1">&#39;monthly_ratios/etr_mm_summary_comp_all_yrs.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layer</span> <span class="o">=</span> <span class="s1">&#39;annual_mean&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;power&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;smooth&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out_dir</span> <span class="o">=</span> <span class="s1">&#39;s20_p1&#39;</span> <span class="c1"># optional subdir name for saving rasters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">interpolate</span><span class="p">(</span><span class="n">summary_file</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">layer</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">out_dir</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">scale_factor</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="n">buffer</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting file structure that is created by the above command is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>monthly_ratios/
├── etr_mm_summary_all_yrs.csv
├── etr_mm_summary_comp_all_yrs.csv
└── spatial/
    ├── etr_mm_invdist_400m/
    │   └── s20_p1/
    │       ├── annual_mean.tiff
    │       ├── annual_mean.vrt
    │       ├── etr_mm_summary_comp_all_yrs.csv
    │       ├── etr_mm_summary_pts.cpg
    │       ├── etr_mm_summary_pts.dbf
    │       ├── etr_mm_summary_pts.prj
    │       ├── etr_mm_summary_pts.shp
    │       ├── etr_mm_summary_pts.shx
    │       ├── zonal_stats.csv
    │       └── residual_plots
    │           └── annual_res.html
    ├── grid.cpg
    ├── grid.dbf
    ├── grid.prj
    ├── grid.shp
    └── grid.shx
</pre></div>
</div>
<p>Specifically, the interpolated raster is saved to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monthly_ratios/spatial/etr_mm_invdist_400m/s20_p1/Annual_mean.tiff&#39;</span>
</pre></div>
</div>
<p>where the file name and directory is based on the variable being
interpolated, methods, and the raster resolution. The <code class="docutils literal notranslate"><span class="pre">out</span></code>
keyword argument lets us add any number of subdirectories to the final
output directory, in this case the ‘s20_p1’ dir contains info on params.
In this case the original gridMET resolution is 4 km therefore the
scale facter of 0.1 results in a 400 m resolution.</p>
<p>The final result will be the creation of the CSV:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monthly_ratios/spatial/etr_mm_invdist_400m/s20_p1/zonal_stats.csv&#39;</span>
</pre></div>
</div>
<p>In “zonal_stats.csv” the zonal mean for ratios of annual station to
gridMET ETr will be stored along with gridMET IDs, e.g.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 37%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>GRIDMET_ID</p></th>
<th class="head"><p>Annual_mean</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>515902</p></td>
<td><p>0.87439453125</p></td>
</tr>
<tr class="row-odd"><td><p>514516</p></td>
<td><p>0.888170013427734</p></td>
</tr>
<tr class="row-even"><td><p>513130</p></td>
<td><p>0.90002197265625</p></td>
</tr>
<tr class="row-odd"><td><p>…</p></td>
<td><p>…</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>To calculate zonal statistics of bias ratios that are not part of
the default or command line workflow we can assign any numeric layer
in the input summary CSV to be interpolations. For example if
we wanted to interpolate the coefficient of variation of the growing
season bias ratio “April_to_oct_cv”, then we could
estimate the surface of this variable straightforwardly,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">layer</span> <span class="o">=</span> <span class="s1">&#39;April_to_oct_cv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func</span> <span class="o">=</span> <span class="s1">&#39;invdistnn&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># we can also &#39;upscale&#39; the interpolation resolution</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">interpolate</span><span class="p">(</span><span class="n">summary_file</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">layer</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">function</span><span class="o">=</span><span class="n">func</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="n">buffer</span><span class="p">)</span>
</pre></div>
</div>
<p>This will create the GeoTIFF raster:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monthly_ratios/spatial/etr_mm_invdistnn_400m/April_to_oct_cv.tiff&#39;</span>
</pre></div>
</div>
<p>And the zonal means will be added as a column named “April_to_oct_cv”
to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monthly_ratios/spatial/etr_mm_invdistnn_400m/zonal_stats.csv&#39;</span>
</pre></div>
</div>
<p>As with other components of <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code>, any other climatic
variables that exist in the gridMET dataset can be used along
with any corresponding station time series data from the user.
The input (<code class="docutils literal notranslate"><span class="pre">in_path</span></code>) to all routines in <a class="reference internal" href="#module-gridwxcomp.spatial" title="gridwxcomp.spatial"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.spatial</span></code></a>
is the summary CSV created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>, the
prefix to this file is what determines the climatic variable
that spatial analysis is conducted. See <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>
for examples of how to use different climatic variables, e.g.
TMax or ETo.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.8)"><strong>FileNotFoundError</strong></a> – if the input summary CSV file or the
    fishnet for extracting zonal statistics do not exist.
    The fishnet should be in the subdirectory of <code class="docutils literal notranslate"><span class="pre">in_path</span></code>
    i.e. “&lt;in_path&gt;/spatial/grid.shp”.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function can be used independently of <a class="reference internal" href="#gridwxcomp.spatial.make_grid" title="gridwxcomp.spatial.make_grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_grid</span></code></a>
however, if the buffer and input [var]_summary_comp_[years].csv files
arguments differ from those used for <a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">interpolate</span></code></a> the
raster may not fully cover the fishnet which may result in
gaps in the zonal statistics.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gridwxcomp.spatial.calc_pt_error">
<code class="sig-prename descclassname">gridwxcomp.spatial.</code><code class="sig-name descname">calc_pt_error</code><span class="sig-paren">(</span><em class="sig-param">in_path</em>, <em class="sig-param">out_dir</em>, <em class="sig-param">layer</em>, <em class="sig-param">grid_var</em>, <em class="sig-param">grid_id_name='GRIDMET_ID'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/spatial.html#calc_pt_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.spatial.calc_pt_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate point ratio estimates from interpolated raster, residuals,
and add to output summary CSV and point shapefile. Make copies of
updated files and saves to directory with interpolated rasters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to comprehensive summary CSV created by
<a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a></p></li>
<li><p><strong>out_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to dir that contains interpolated raster</p></li>
<li><p><strong>layer</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – layer to calculate error e.g. “annual_mean”</p></li>
<li><p><strong>grid_var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – name of grid variable e.g. “etr_mm”</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function should be run <strong>after</strong> <a class="reference internal" href="#gridwxcomp.spatial.make_points_file" title="gridwxcomp.spatial.make_points_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_points_file</span></code></a>
because it copies data from the shapefile it created.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gridwxcomp.spatial.zonal_stats">
<code class="sig-prename descclassname">gridwxcomp.spatial.</code><code class="sig-name descname">zonal_stats</code><span class="sig-paren">(</span><em class="sig-param">in_path</em>, <em class="sig-param">raster</em>, <em class="sig-param">grid_id_name='GRIDMET_ID'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/spatial.html#zonal_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.spatial.zonal_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate zonal means from interpolated surface of etr bias ratios
created by <a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">interpolate</span></code></a> using the fishnet grid created by
<a class="reference internal" href="#gridwxcomp.spatial.make_grid" title="gridwxcomp.spatial.make_grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_grid</span></code></a>. Save mean values for each gridcell to
a CSV file joined to grid IDs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to [var]_summary_comp_[years].csv file containing
monthly bias ratios, lat, long, and other data. Created by
<a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p></li>
<li><p><strong>raster</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to interpolated raster of bias ratios to
be used for zonal stats. First created by <a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">interpolate</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Although it is prefered to use this function as part of
<a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">interpolate</span></code></a> or indirectly using the <a class="reference internal" href="#module-gridwxcomp.spatial" title="gridwxcomp.spatial"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.spatial</span></code></a>
command line usage. However if the grid shapefile and spatial
interpolated raster(s) have already been created without zonal
stats then,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">spatial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># assign input paths</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_file</span> <span class="o">=</span> <span class="s1">&#39;monthly_ratios/etr_mm_summary_comp_[years].csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raster_file</span> <span class="o">=</span> <span class="s1">&#39;monthly_ratios/spatial/etr_mm_invdist_400m/Jan_mean.tiff&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spatial</span><span class="o">.</span><span class="n">zonal_stats</span><span class="p">(</span><span class="n">summary_file</span><span class="p">,</span> <span class="n">raster_file</span><span class="p">)</span>
</pre></div>
</div>
<p>The final result will be the creation of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monthly_ratios/spatial/etr_mm_invdist_400m/gridMET_stats.csv&#39;</span>
</pre></div>
</div>
<p>The resulting CSV contains the gridMET IDS and zonal means
for each gridMET cell in the fishnet which must exist at:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monthly_ratios/spatial/grid.shp&#39;</span>
</pre></div>
</div>
<p>also see <a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">interpolate</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.8)"><strong>FileNotFoundError</strong></a> – if the input summary CSV file or the
    fishnet for extracting zonal statistics do not exist.
    The fishnet should be in the subdirectory of <code class="docutils literal notranslate"><span class="pre">in_path</span></code>
    at “/spatial/grid.shp”.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If zonal statistics are estimated for the same variable on the
same raster more than once, the contents of that column in the
zonal_stats.csv file will be overwritten.</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-gridwxcomp.plot">
<span id="plot"></span><h3><a class="toc-backref" href="#id27">plot</a><a class="headerlink" href="#module-gridwxcomp.plot" title="Permalink to this headline">¶</a></h3>
<p>Create interactive HTML comparison plots between paired station and
gridMET climatic variables or bar comparison plots between interpolated and
station point data.</p>
<dl class="function">
<dt id="gridwxcomp.plot.daily_comparison">
<code class="sig-prename descclassname">gridwxcomp.plot.</code><code class="sig-name descname">daily_comparison</code><span class="sig-paren">(</span><em class="sig-param">input_csv</em>, <em class="sig-param">out_dir=None</em>, <em class="sig-param">year_filter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/plot.html#daily_comparison"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.plot.daily_comparison" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare daily weather station data from
<a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">PyWeatherQAQC</a> with gridMET
for each month in year specified.</p>
<p>The <a class="reference internal" href="#gridwxcomp.plot.daily_comparison" title="gridwxcomp.plot.daily_comparison"><code class="xref py py-func docutils literal notranslate"><span class="pre">daily_comparison</span></code></a> function produces HTML files with time series
and scatter plots of station versus gridMET climate variables. It uses the
<a class="reference external" href="https://bokeh.pydata.org/en/latest/">bokeh</a> module to create interactive
plots, e.g. they can be zoomed in/out and panned. Separate plot files are
created for each month of a single year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to input CSV file containing paired station/
gridMET metadata. This file is created by running
<a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.prep_input</span></code></a> followed by <a class="reference internal" href="#gridwxcomp.download_gridmet_opendap" title="gridwxcomp.download_gridmet_opendap"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.download_gridmet_opendap</span></code></a>.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>out_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Directory to save comparison
plots, if None save to “daily_comp_plots” in currect directory.</p></li>
<li><p><strong>year_filter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Single year YYYY or range
YYYY-YYYY</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The <a class="reference internal" href="#gridwxcomp.plot.daily_comparison" title="gridwxcomp.plot.daily_comparison"><code class="xref py py-func docutils literal notranslate"><span class="pre">daily_comparison</span></code></a> function will generate HTML files with
bokeh plots for paired climate variables, e.g. etr_mm, eto_mm,
u2_ms, tmin_c, tmax_c, srad_wm2, ea_kpa, and Ko (dew point depression).
Monthly plots are created for a single year.</p>
<p>From the command line, use the “plot” command with the
<code class="docutils literal notranslate"><span class="pre">[-t,</span> <span class="pre">--plot-type]</span></code> option set to station-grid-comp and
the <code class="docutils literal notranslate"><span class="pre">[-f,</span> <span class="pre">--freq]</span></code> option left as default (“daily”),</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ gridwxcomp plot merged_input.csv -t station-grid-comp -o comp_plots_2016 -y <span class="m">2016</span>
</pre></div>
</div>
<p>or within Python,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp.plot</span> <span class="k">import</span> <span class="n">daily_comparison</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">daily_comparison</span><span class="p">(</span><span class="s1">&#39;merged_input.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;comp_plots_2016&#39;</span><span class="p">,</span> <span class="s1">&#39;2016&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Both methods result in monthly HTML <a class="reference external" href="https://bokeh.pydata.org/en/latest/">bokeh</a>
plots being saved to “comp_plots_2016/STATION_ID/” where “STATION_ID”
is the station ID as found in the input CSV file. A file is saved for
each month with the station ID, month, and year in the file name.
If <code class="docutils literal notranslate"><span class="pre">out_dir</span></code> keyword argument or <code class="docutils literal notranslate"><span class="pre">[-o,</span> <span class="pre">--out-dir]</span></code> command line
option is not given the plots will be saved to a directory named
“daily_comp_plots”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If there are less than five days of data in a month the plot for that
month will not be created.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gridwxcomp.plot.monthly_comparison">
<code class="sig-prename descclassname">gridwxcomp.plot.</code><code class="sig-name descname">monthly_comparison</code><span class="sig-paren">(</span><em class="sig-param">input_csv</em>, <em class="sig-param">out_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/plot.html#monthly_comparison"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.plot.monthly_comparison" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare monthly average weather station data from
<a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">PyWeatherQAQC</a> with gridMET.</p>
<p>The <a class="reference internal" href="#gridwxcomp.plot.monthly_comparison" title="gridwxcomp.plot.monthly_comparison"><code class="xref py py-func docutils literal notranslate"><span class="pre">monthly_comparison</span></code></a> function produces HTML files with time series
and scatter plots of station versus gridMET climate variables of monthly
mean data. It uses the <a class="reference external" href="https://bokeh.pydata.org/en/latest/">bokeh</a> module
to create interactive plots, e.g. they can be zoomed in/out and panned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to input CSV file containing
paired station/gridMET metadata. This file is
created by running <a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.prep_input</span></code></a> followed by
<a class="reference internal" href="#gridwxcomp.download_gridmet_opendap" title="gridwxcomp.download_gridmet_opendap"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.download_gridmet_opendap</span></code></a>.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><p><strong>out_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – default None. Directory to save comparison plots.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Example</p>
<p>The <a class="reference internal" href="#gridwxcomp.plot.monthly_comparison" title="gridwxcomp.plot.monthly_comparison"><code class="xref py py-func docutils literal notranslate"><span class="pre">monthly_comparison</span></code></a> function will generate HTML files with
bokeh plots for paired climate variable, e.g. etr_mm,
eto_mm, u2_ms, tmin_c, tmax_c, srad_wm2, ea_kpa, and Ko (dew point
depression).</p>
<p>From the command line, use the “plot” command with the
<code class="docutils literal notranslate"><span class="pre">[-t,</span> <span class="pre">--plot-type]</span></code> option set to station-grid-comp and
the <code class="docutils literal notranslate"><span class="pre">[-f,</span> <span class="pre">--freq]</span></code> option set to “monthly”,</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ gridwxcomp plot merged_input.csv -t station-grid-comp -freq monthly -o monthly_plots
</pre></div>
</div>
<p>or within Python,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp.plot</span> <span class="k">import</span> <span class="n">monthly_comparison</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">monthly_comparison</span><span class="p">(</span><span class="s1">&#39;merged_input.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;monthly_plots&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Both methods result in monthly HTML bokeh plots being saved
to “monthly_plots/” which contains a plot file for each station
as found in the input CSV file. If <code class="docutils literal notranslate"><span class="pre">out_dir</span></code> keyword argument or
<code class="docutils literal notranslate"><span class="pre">[-o,</span> <span class="pre">--out-dir]</span></code> command line option is not given the plots will
be saved to a directory named “monthly_comp_plots”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If there are less than 2 months of data the plot for that
station will not be created.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gridwxcomp.plot.station_bar_plot">
<code class="sig-prename descclassname">gridwxcomp.plot.</code><code class="sig-name descname">station_bar_plot</code><span class="sig-paren">(</span><em class="sig-param">summary_csv</em>, <em class="sig-param">layer</em>, <em class="sig-param">out_dir=None</em>, <em class="sig-param">x_label=None</em>, <em class="sig-param">y_label=None</em>, <em class="sig-param">title=None</em>, <em class="sig-param">subtitle=None</em>, <em class="sig-param">year_subtitle=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/plot.html#station_bar_plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.plot.station_bar_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce an interactive bar chart comparing multiple climate stations to each
other for a particular variable, e.g. bias ratios or interpolated residuals.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>summary_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to summary CSV produced by either <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>
or by <code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.interpolate</span></code>. Should contain <code class="docutils literal notranslate"><span class="pre">layer</span></code>
data for plot.</p></li>
<li><p><strong>layer</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – name of variable to plot.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>out_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Output directory path, default is
‘station_bar_plots’ in parent directory of <code class="docutils literal notranslate"><span class="pre">summary_csv</span></code>.</p></li>
<li><p><strong>x_label</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Label for x-axis.</p></li>
<li><p><strong>y_label</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Label for y-axis, defaults to
<code class="docutils literal notranslate"><span class="pre">layer</span></code>.</p></li>
<li><p><strong>title</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Title of plot.</p></li>
<li><p><strong>subtitle</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Additional subtitle(s)
for plot.</p></li>
<li><p><strong>year_subtitle</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – default True. If true print subtitle on plot with
the max year range used for station data, e.g. ‘years: 1995-2005’</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Example</p>
<p>Let’s say we want to compare the mean growing seasion bias ratios of
reference evapotranspiration (ETr) for the selection of stations we
used to calculate bias ratios. The summary CSV file containing the
ratios should be first created using <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp.plot</span> <span class="k">import</span> <span class="n">station_bar_plot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># path to summary CSV with station data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">in_file</span> <span class="o">=</span> <span class="s1">&#39;monthly_ratios/etr_mm_summary_all_yrs.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layer</span> <span class="o">=</span> <span class="s1">&#39;growseason_mean&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">station_bar_plot</span><span class="p">(</span><span class="n">in_file</span><span class="p">,</span> <span class="n">layer</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting file will be saved using the layer name as a file name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monthly_ratios/station_bar_plots/growseason_mean.html&#39;</span>
</pre></div>
</div>
<p>The plot file will contain the mean growing season bias ratios
of ETr for each station, sorted from smallest to largest values.</p>
<p>This function may also be used for any numerical data in the summary CSV
files that are created by <code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.interpolate</span></code> in addition to
those created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>. The main
requirement is that <code class="docutils literal notranslate"><span class="pre">summary_csv</span></code> must contain the column ‘STATION_ID’
and the <code class="docutils literal notranslate"><span class="pre">layer</span></code> keyword argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.8)"><strong>FileNotFoundError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">summary_csv</span></code> is not found.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">layer</span></code> does not exist as a column name in <code class="docutils literal notranslate"><span class="pre">summary_csv</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="interpgdal">
<h3><a class="toc-backref" href="#id28">InterpGdal</a><a class="headerlink" href="#interpgdal" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="gridwxcomp.InterpGdal">
<em class="property">class </em><code class="sig-prename descclassname">gridwxcomp.</code><code class="sig-name descname">InterpGdal</code><span class="sig-paren">(</span><em class="sig-param">summary_csv_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/interpgdal.html#InterpGdal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.InterpGdal" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Usage of gdal command line tools within <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code>, currently
utilizes the <a class="reference external" href="https://www.gdal.org/gdal_grid.html">gdal_grid</a>
command line tool.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>summary_csv_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to [var]_summary_comp CSV file created
by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a> containing point bias ratios,
lat, and long.</p>
</dd>
</dl>
<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.CELL_SIZE">
<code class="sig-name descname">CELL_SIZE</code><a class="headerlink" href="#gridwxcomp.InterpGdal.CELL_SIZE" title="Permalink to this definition">¶</a></dt>
<dd><p>resolution of gridMET dataset in decimal degrees.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.interp_methods">
<code class="sig-name descname">interp_methods</code><a class="headerlink" href="#gridwxcomp.InterpGdal.interp_methods" title="Permalink to this definition">¶</a></dt>
<dd><p>gdal_grid interpolation algorithms.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)">tuple</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.default_layers">
<code class="sig-name descname">default_layers</code><a class="headerlink" href="#gridwxcomp.InterpGdal.default_layers" title="Permalink to this definition">¶</a></dt>
<dd><p>layers to interpolate created by
<a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>, e.g. “Jan_mean”, found in
<code class="docutils literal notranslate"><span class="pre">summary_csv_path</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)">tuple</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.default_params">
<code class="sig-name descname">default_params</code><a class="headerlink" href="#gridwxcomp.InterpGdal.default_params" title="Permalink to this definition">¶</a></dt>
<dd><p>dictionary with default parameters for each
interpolation algorithm, slightly modified from gdal defaults.
Keys are interpolation method names, keys are dictionaries with
parameter names keys and corresponding values.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.var_residual_names">
<code class="sig-name descname">var_residual_names</code><a class="headerlink" href="#gridwxcomp.InterpGdal.var_residual_names" title="Permalink to this definition">¶</a></dt>
<dd><p>dictionary that maps names of bias ratios
to the name of their intepolated residual if they are too long for
storing as a field name in an ESRI shapefile (i.e. &gt; 10 chars).</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.summary_csv_path">
<code class="sig-name descname">summary_csv_path</code><a class="headerlink" href="#gridwxcomp.InterpGdal.summary_csv_path" title="Permalink to this definition">¶</a></dt>
<dd><p>absolute path object to
input <code class="docutils literal notranslate"><span class="pre">summary_csv_path</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.layers">
<code class="sig-name descname">layers</code><a class="headerlink" href="#gridwxcomp.InterpGdal.layers" title="Permalink to this definition">¶</a></dt>
<dd><p>list of layers in <code class="docutils literal notranslate"><span class="pre">summary_csv_path</span></code> to interpolate
e.g. when using <a class="reference internal" href="#gridwxcomp.InterpGdal.gdal_grid" title="gridwxcomp.InterpGdal.gdal_grid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InterpGdal.gdal_grid</span></code></a> with <code class="docutils literal notranslate"><span class="pre">layer=&quot;all&quot;</span></code>
defaults to <a class="reference internal" href="#gridwxcomp.InterpGdal.default_layers" title="gridwxcomp.InterpGdal.default_layers"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InterpGdal.default_layers</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)">list</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.grid_bounds">
<code class="sig-name descname">grid_bounds</code><a class="headerlink" href="#gridwxcomp.InterpGdal.grid_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>default None. Extent for interpolation
raster in order (min long, max long, min lat, max lat).</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)">tuple</a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.interp_meth">
<code class="sig-name descname">interp_meth</code><a class="headerlink" href="#gridwxcomp.InterpGdal.interp_meth" title="Permalink to this definition">¶</a></dt>
<dd><p>default ‘invdist’. gdal_grid interpolation method.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.interped_rasters">
<code class="sig-name descname">interped_rasters</code><a class="headerlink" href="#gridwxcomp.InterpGdal.interped_rasters" title="Permalink to this definition">¶</a></dt>
<dd><p>empty list that is appended with
<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> objects to interpolated rasters after using
<a class="reference internal" href="#gridwxcomp.InterpGdal.gdal_grid" title="gridwxcomp.InterpGdal.gdal_grid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InterpGdal.gdal_grid</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)">list</a></p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.params">
<code class="sig-name descname">params</code><a class="headerlink" href="#gridwxcomp.InterpGdal.params" title="Permalink to this definition">¶</a></dt>
<dd><p>default None. After <a class="reference internal" href="#gridwxcomp.InterpGdal.gdal_grid" title="gridwxcomp.InterpGdal.gdal_grid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InterpGdal.gdal_grid</span></code></a>
<code class="docutils literal notranslate"><span class="pre">params</span></code> is updated with the last used interpolation parameters
in the form of a dictionary with parameter names as keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)">None</a></p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Example</p>
<p>The <a class="reference internal" href="#gridwxcomp.InterpGdal" title="gridwxcomp.InterpGdal"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpGdal</span></code></a> class is useful for experimenting with multiple
interpolation algorithms provided by gdal which are optimized and
often sensitive to multiple parameters. We can use the object
to loop over a range of parameter combinations to test how algorithms
perform, we might pick a single layer to test, in this case the
growing season bias ratios between station and gridMET reference
evapotranspiration (etr_mm). Below is a routine to conduct a
basic sensitivity analysis of the power and smooth parameters of the
inverse distance to a power interpolation method,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">InterpGdal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create instance variable from summary csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_file</span> <span class="o">=</span> <span class="s1">&#39;PATH/TO/etr_mm_summary_comp.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create a InterpGdal instance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span> <span class="o">=</span> <span class="n">InterpGdal</span><span class="p">(</span><span class="n">summary_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layer</span> <span class="o">=</span> <span class="s1">&#39;growseason_mean&#39;</span> <span class="c1"># could be a list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># run inverse distance interpolation with different params</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># build output directory based on parameter sets</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;spatial&#39;</span><span class="p">,</span> <span class="s1">&#39;invdist&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="s1">&#39;power=</span><span class="si">{}</span><span class="s1">_smooth=</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;power&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">,</span> <span class="s1">&#39;smooth&#39;</span><span class="p">:</span> <span class="n">s</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">test</span><span class="o">.</span><span class="n">gdal_grid</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">layer</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</div>
<p>Note, we did not assign the interpolation method ‘invdist’ because it
is the default. To use another interpolation method we would
assign the <code class="docutils literal notranslate"><span class="pre">interp_meth</span></code> kwarg to <a class="reference internal" href="#gridwxcomp.InterpGdal.gdal_grid" title="gridwxcomp.InterpGdal.gdal_grid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InterpGdal.gdal_grid</span></code></a>.
Similarly, we could experiment with other parameters which all can be
found in the class attribute <a class="reference internal" href="#gridwxcomp.InterpGdal.default_params" title="gridwxcomp.InterpGdal.default_params"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InterpGdal.default_params</span></code></a>. The
instance variable <a class="reference internal" href="#gridwxcomp.InterpGdal.params" title="gridwxcomp.InterpGdal.params"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InterpGdal.params</span></code></a> can also be used to save
metadata on parameters used for each run.</p>
<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.GRIDMET_RES">
<code class="sig-name descname">GRIDMET_RES</code><em class="property"> = 0.041666666666666664</em><a class="headerlink" href="#gridwxcomp.InterpGdal.GRIDMET_RES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">interp_methods</code><em class="property"> = ('average', 'invdist', 'invdistnn', 'linear', 'nearest')</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">default_layers</code><em class="property"> = ('Jan_mean', 'Feb_mean', 'Mar_mean', 'Apr_mean', 'May_mean', 'Jun_mean', 'Jul_mean', 'Aug_mean', 'Sep_mean', 'Oct_mean', 'Nov_mean', 'Dec_mean', 'growseason_mean', 'annual_mean', 'summer_mean')</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">default_params</code><em class="property"> = {'average': {'angle': 0, 'min_points': 0, 'nodata': -999, 'radius1': 2, 'radius2': 2}, 'invdist': {'angle': 0, 'max_points': 0, 'min_points': 0, 'nodata': -999, 'power': 4, 'radius1': 0, 'radius2': 0, 'smoothing': 0.2}, 'invdistnn': {'max_points': 12, 'min_points': 0, 'nodata': -999, 'power': 4, 'radius': 10, 'smoothing': 0.2}, 'linear': {'nodata': -999, 'radius': -1}, 'nearest': {'angle': 0, 'nodata': -999, 'radius1': 0, 'radius2': 0}}</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="sig-name descname">var_residual_names</code><em class="property"> = {'annual_mean': 'annual_res', 'growseason_mean': 'grow_res', 'summer_mean': 'summer_res'}</em></dt>
<dd></dd></dl>

<dl class="method">
<dt id="gridwxcomp.InterpGdal.gdal_grid">
<code class="sig-name descname">gdal_grid</code><span class="sig-paren">(</span><em class="sig-param">layer='all'</em>, <em class="sig-param">out_dir=''</em>, <em class="sig-param">interp_meth='invdist'</em>, <em class="sig-param">params=None</em>, <em class="sig-param">bounds=None</em>, <em class="sig-param">nx_cells=None</em>, <em class="sig-param">ny_cells=None</em>, <em class="sig-param">scale_factor=0.1</em>, <em class="sig-param">z_stats=True</em>, <em class="sig-param">res_plot=True</em>, <em class="sig-param">grid_res=None</em>, <em class="sig-param">grid_id_name='GRIDMET_ID'</em>, <em class="sig-param">options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/interpgdal.html#InterpGdal.gdal_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.InterpGdal.gdal_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Run gdal_grid command line tool to interpolate point ratios.</p>
<p>For further information on theinterpolation algorithms including
their function, parameters, and options see
<a class="reference external" href="https://www.gdal.org/gdal_grid.html">gdal_grid</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>layer</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a>) – default ‘all’. Name of summary file column
to interpolate, e.g. ‘Jan_mean’, or list of names. If ‘all’
use all variables in mutable instance attribute “layers”.</p></li>
<li><p><strong>out_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – default ‘’. Output directory to save rasters and
zonal stats CSV, always appended to the root dir of the
input summary CSV parent path that contains point ratios.</p></li>
<li><p><strong>interp_meth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – default ‘invdist’. gdal interpolation algorithm</p></li>
<li><p><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Parameters for
interpolation algorithm. See examples for format rules.</p></li>
<li><p><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.8)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Tuple of bounding coordinates
in the following order (min long, max long, min lat, max lat)
which need to be in decimal degrees. If None, get extent from
locations of climate stations in input summary CSV with 25 cell
buffer.</p></li>
<li><p><strong>nx_cells</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – default None. Number of pixels in x dim. of raster,
if None calculated from <code class="docutils literal notranslate"><span class="pre">bounds</span></code>.</p></li>
<li><p><strong>ny_cells</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – default None. Number of pixels in y dim. of raster,
if None calculated from <code class="docutils literal notranslate"><span class="pre">bounds</span></code>.</p></li>
<li><p><strong>scale_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – default 0.1. Scaling factor to apply to
original gridMET fishnet to create resampling resolution. If
scale_factor = 0.1, the resolution will be one tenth gridMET
resolution or 400 m.</p></li>
<li><p><strong>z_stats</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – default True. Calculate zonal means of
interpolated surface to gridMET cells in fishnet and save to a
CSV file. The CSV file will be saved to the same directory as
the interpolated raster file(s).</p></li>
<li><p><strong>res_plot</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – default True. Make bar plot for residual (error)
between interpolated and station value for <code class="docutils literal notranslate"><span class="pre">layer</span></code>.</p></li>
<li><p><strong>options</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – default None. Extra command line options for
gdal_grid spatial interpolation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>The default interpolation algorithm ‘invdist’ or inverse distance
weighting to a power to interpolate bias ratios in a summary CSV
file that was first created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.
The default option will interpolate all layers in <a class="reference internal" href="#gridwxcomp.InterpGdal.default_layers" title="gridwxcomp.InterpGdal.default_layers"><code class="xref py py-obj docutils literal notranslate"><span class="pre">InterpGdal.default_layers</span></code></a>
and calculate zonal statistics for all layers. It will also assume
the boundaries of the rasters are defined by the centroid locations
of the <em>outer</em> station locations in the input summary CSV plus a 25
gridMET cell buffer, the pixel size will be 400m (scale_factor=0.1).            We also limit the interpolation to two layers, growing season and
annual mean bias ratios,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">InterpGdal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_file</span> <span class="o">=</span> <span class="s1">&#39;PATH/TO/[var]_summary_comp.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out_dir</span> <span class="o">=</span> <span class="s1">&#39;default_params&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;growseason_mean&#39;</span><span class="p">,</span> <span class="s1">&#39;annual_mean&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create a InterpGdal instance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span> <span class="o">=</span> <span class="n">InterpGdal</span><span class="p">(</span><span class="n">summary_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># run inverse distance interpolation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">gdal_grid</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">layers</span><span class="p">)</span>
</pre></div>
</div>
<p>Note, zonal statistics to gridMET cells and interpolated residual
plots are computed by default. A gridMET fishnet must have been
previously created using <a class="reference internal" href="#gridwxcomp.spatial.make_grid" title="gridwxcomp.spatial.make_grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.spatial.make_grid</span></code></a>.</p>
<p>After running the code above the following files will be created
in the ‘default_params’ directory which will be build in the same
location as the input summary CSV:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>default_params/
├── annual_mean.tiff
├── annual_mean.vrt
├── etr_mm_summary_comp_all_yrs.csv
├── etr_mm_summary_pts.cpg
├── etr_mm_summary_pts.dbf
├── etr_mm_summary_pts.prj
├── etr_mm_summary_pts.shp
├── etr_mm_summary_pts.shx
├── zonal_stats.csv
├── growseason_mean.tiff
├── growseason_mean.vrt
└── residual_plots/
    ├── annual_res.html
    └── grow_res.html
</pre></div>
</div>
<p>GeoTiff interpolated raster files are now created for select layers
as well as VRT (virtual raster) meta files that store info
on each raster’s data source. The file “gridMET_stats.csv” contains
gridMET ID as an index and each layer zonal mean as columns. For
example,</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 39%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>GRIDMET_ID</p></th>
<th class="head"><p>growseason_mean</p></th>
<th class="head"><p>annual_mean</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>511747</p></td>
<td><p>0.9650671287940088</p></td>
<td><p>0.9078723876243023</p></td>
</tr>
<tr class="row-odd"><td><p>510361</p></td>
<td><p>0.9658465063428492</p></td>
<td><p>0.9097255715561022</p></td>
</tr>
<tr class="row-even"><td><p>508975</p></td>
<td><p>0.9667075970344162</p></td>
<td><p>0.9117676407214926</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>There are several <a class="reference internal" href="#gridwxcomp.InterpGdal" title="gridwxcomp.InterpGdal"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpGdal</span></code></a> instance attributes that
may be useful, for example to see the parameters that were used
for the last call to <a class="reference internal" href="#gridwxcomp.InterpGdal.gdal_grid" title="gridwxcomp.InterpGdal.gdal_grid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InterpGdal.gdal_grid</span></code></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">params</span>
<span class="go">{&#39;power&#39;: 4,</span>
<span class="go"> &#39;smoothing&#39;: 0.2,</span>
<span class="go"> &#39;radius1&#39;: 0,</span>
<span class="go"> &#39;radius2&#39;: 0,</span>
<span class="go"> &#39;angle&#39;: 0,</span>
<span class="go"> &#39;max_points&#39;: 0,</span>
<span class="go"> &#39;min_points&#39;: 0,</span>
<span class="go"> &#39;nodata&#39;: -999}</span>
</pre></div>
</div>
<p>Or to find the paths to the interpolated raster files that
have been created by the instance (all), the “interped_rasters”
instance attribute is a list of all <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> objects
of absolute paths of raster files. To get them as strings,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">test</span><span class="o">.</span><span class="n">interped_rasters</span><span class="p">))</span>
<span class="go">[&#39;PATH/TO/growseason_mean.tiff&#39;,</span>
<span class="go"> &#39;PATH/TO/annual_mean.tiff&#39;]</span>
</pre></div>
</div>
<p>Similary, the raster extent that was used and will be used again for
any subsequent calls of <a class="reference internal" href="#gridwxcomp.InterpGdal.gdal_grid" title="gridwxcomp.InterpGdal.gdal_grid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InterpGdal.gdal_grid</span></code></a> can be
retrieved by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">grid_bounds</span>
<span class="go">(-111.74583329966664,</span>
<span class="go"> -108.74583330033335,</span>
<span class="go"> 38.21250000003333,</span>
<span class="go"> 40.462499999966674)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">nx_cells</span></code> and <code class="docutils literal notranslate"><span class="pre">ny_cells</span></code> arguments are an option for
defining the output raster’s resolution. If these arguments are
passed then the <code class="docutils literal notranslate"><span class="pre">scale_factor</span></code> argument has no effect. The latter
assumes raster resolution is relative to gridMET (4 km).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.8)"><strong>KeyError</strong></a> – if interp_meth is not a valid gdal_grid interpolation
    algorithm name.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gridwxcomp.util">
<span id="util"></span><h3><a class="toc-backref" href="#id29">util</a><a class="headerlink" href="#module-gridwxcomp.util" title="Permalink to this headline">¶</a></h3>
<p>Utility functions or classes for <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code> package</p>
<dl class="function">
<dt id="gridwxcomp.util.get_gridmet_meta_csv">
<code class="sig-prename descclassname">gridwxcomp.util.</code><code class="sig-name descname">get_gridmet_meta_csv</code><span class="sig-paren">(</span><em class="sig-param">gridmet_meta_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/util.html#get_gridmet_meta_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.util.get_gridmet_meta_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Find path to ‘gridmet_cell_data.csv’ packaged with gridwxcomp</p>
</dd></dl>

<dl class="function">
<dt id="gridwxcomp.util.parse_yr_filter">
<code class="sig-prename descclassname">gridwxcomp.util.</code><code class="sig-name descname">parse_yr_filter</code><span class="sig-paren">(</span><em class="sig-param">dt_df</em>, <em class="sig-param">years</em>, <em class="sig-param">label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/util.html#parse_yr_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.util.parse_yr_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse string year filter and apply it to datetime-indexed
DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dt_df</strong> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.25.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>) – datetime-indexed DataFrame</p></li>
<li><p><strong>years</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – years to select, e.g. 2015 or 2000-2010</p></li>
<li><p><strong>label</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – identifier to print warning message if <code class="docutils literal notranslate"><span class="pre">years</span></code>
filter partially overlaps with actual date index</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>first element is</dt><dd><p>input DataFrame <code class="docutils literal notranslate"><span class="pre">dt_df</span></code> indexed to <code class="docutils literal notranslate"><span class="pre">years</span></code> filter,
second element is string of year range, e.g. ‘2001_2011’</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ret (tuple of (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.25.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>, str))</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2000&#39;</span><span class="p">,</span> <span class="s1">&#39;2015&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">yr_str</span> <span class="o">=</span> <span class="n">parse_yr_filter</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;1998-2002&#39;</span><span class="p">,</span> <span class="s1">&#39;station1&#39;</span><span class="p">)</span>
<span class="go">WARNING: data for station1 starts in 2000 but you gave 1998</span>
<span class="go">Years used will only include 2000 to 2002</span>
</pre></div>
</div>
<p>Now df will only contain indices with dates between 2000 and
2002 and</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">yr_str</span>
<span class="go">&#39;1998_2002&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.8)"><strong>ValueError</strong></a> – if <code class="docutils literal notranslate"><span class="pre">years</span></code> is invalid or not found
    in time series index of DataFrame.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="changelog.html" class="btn btn-neutral float-right" title="Change Log" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_started.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, John Volk and Chris Pearson

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXXXX-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>