

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="Python" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="Python" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Reference &mdash; gridwxcomp 0.0.57 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/copybutton.js"></script>
        <script type="text/javascript" src="_static/custom.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@1/dist/clipboard.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Change Log" href="changelog.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> gridwxcomp
          

          
          </a>

          
            
            
              <div class="version">
                0.0.57
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#quick-start-from-command-line">Quick start from command line</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-line-interface">Command Line Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gridwxcomp">gridwxcomp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gridwxcomp-prep-input">gridwxcomp prep-input</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gridwxcomp-download-gridmet-ee">gridwxcomp download-gridmet-ee</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gridwxcomp-spatial">gridwxcomp spatial</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gridwxcomp-plot">gridwxcomp plot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#python-functions-classes-and-modules">Python functions, classes, and modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prep-input">prep_input</a></li>
<li class="toctree-l3"><a class="reference internal" href="#download-gridmet-ee">download_gridmet_ee</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios">calc_bias_ratios</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gridwxcomp.spatial">spatial</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gridwxcomp.daily_comparison">daily_comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gridwxcomp.monthly_comparison">monthly_comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interpgdal">InterpGdal</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-gridwxcomp.util">util</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-0-5">Version 0.0.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-0-4">Version 0.0.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-0-3">Version 0.0.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-0-2">Version 0.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#version-0-0-1">Version 0.0.1</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">gridwxcomp</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>API Reference</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<p>This page documents all routines provided by <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code>. Tools for different routines are listed roughly in the order that they would normally be used.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#command-line-interface" id="id12">Command Line Interface</a><ul>
<li><a class="reference internal" href="#gridwxcomp" id="id13">gridwxcomp</a></li>
<li><a class="reference internal" href="#gridwxcomp-prep-input" id="id14">gridwxcomp prep-input</a></li>
<li><a class="reference internal" href="#gridwxcomp-download-gridmet-ee" id="id15">gridwxcomp download-gridmet-ee</a></li>
<li><a class="reference internal" href="#gridwxcomp-spatial" id="id16">gridwxcomp spatial</a></li>
<li><a class="reference internal" href="#gridwxcomp-plot" id="id17">gridwxcomp plot</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-functions-classes-and-modules" id="id18">Python functions, classes, and modules</a><ul>
<li><a class="reference internal" href="#prep-input" id="id19">prep_input</a></li>
<li><a class="reference internal" href="#download-gridmet-ee" id="id20">download_gridmet_ee</a></li>
<li><a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" id="id21">calc_bias_ratios</a></li>
<li><a class="reference internal" href="#module-gridwxcomp.spatial" id="id22">spatial</a></li>
<li><a class="reference internal" href="#module-gridwxcomp.daily_comparison" id="id23">daily_comparison</a></li>
<li><a class="reference internal" href="#module-gridwxcomp.monthly_comparison" id="id24">monthly_comparison</a></li>
<li><a class="reference internal" href="#interpgdal" id="id25">InterpGdal</a></li>
<li><a class="reference internal" href="#module-gridwxcomp.util" id="id26">util</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="command-line-interface">
<h2><a class="toc-backref" href="#id12">Command Line Interface</a><a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="gridwxcomp">
<h3><a class="toc-backref" href="#id13">gridwxcomp</a><a class="headerlink" href="#gridwxcomp" title="Permalink to this headline">¶</a></h3>
<p>Access gridwxcomp functionality from the command line.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code> tools are accesible via a command line interface using
the console command &quot;gridwxcomp&quot;. To print a list of all available commands
from the command line type,</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gridwxcomp --help
</pre></div>
</div>
<p>Or to print information on a specific command,</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>gridwxcomp COMMAND --help
</pre></div>
</div>
<p>Basic usage to run a command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gridwxcomp <span class="o">[</span>OPTIONS<span class="o">]</span> COMMAND <span class="o">[</span>ARGS<span class="o">]</span>...
</pre></div>
</div>
<p class="rubric">Commands</p>
<dl class="object">
<dt>
<code class="descname">calc-bias-ratios</code></dt>
<dd><p>Bias ratio statistics of station-to-gridMET.</p>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">download-gridmet-ee</code></dt>
<dd><p>Download gridMET climate time series.</p>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">plot</code></dt>
<dd><p>Create comparison or diagnostic graphics.</p>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">prep-input</code></dt>
<dd><p>Pairs climate metadata with gridMET.</p>
</dd></dl>

<dl class="object">
<dt>
<code class="descname">spatial</code></dt>
<dd><p>Spatially interpolate ratio statistics.</p>
</dd></dl>

</div>
<div class="section" id="gridwxcomp-prep-input">
<h3><a class="toc-backref" href="#id14">gridwxcomp prep-input</a><a class="headerlink" href="#gridwxcomp-prep-input" title="Permalink to this headline">¶</a></h3>
<p>Pairs climate metadata with gridMET.</p>
<p>Read climate station metadata file, e.g. from <a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">PyWeatherQAQC</a>
and match each station with gridMET cell locations, save CSV. The required
argument <code class="docutils literal notranslate"><span class="pre">STATION_META_PATH</span></code> is a file containing metadata of climate
stations, if it was not built from <a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">PyWeatherQAQC</a>,
the file should be in CSV format and contain at least these four columns:</p>
<ul class="simple">
<li>Latitude</li>
<li>Longitude</li>
<li>Station</li>
<li>Filename</li>
</ul>
<p>For example the &quot;Station_Data.txt&quot; file is included as an example at
<a class="reference external" href="https://raw.githubusercontent.com/WSWUP/gridwxcomp/master/gridwxcomp/example_data/Station_Data.txt">gridwxcomp/gridwxcomp/example_data/</a>, contains</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="16%" />
<col width="38%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Latitude</th>
<th class="head">Longitude</th>
<th class="head">Station</th>
<th class="head">Filename</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>40.37232</td>
<td>-110.20918</td>
<td>Bluebell (Neola Area)</td>
<td>BluebellUT_Daily</td>
</tr>
<tr class="row-odd"><td>38.38346</td>
<td>-111.63583</td>
<td>Loa</td>
<td>LoaUT_Daily</td>
</tr>
<tr class="row-even"><td>38.32829</td>
<td>-108.85549</td>
<td>Bedrock</td>
<td>BedrockCO_Daily</td>
</tr>
<tr class="row-odd"><td>38.64294</td>
<td>-109.39880</td>
<td>Castle Valley near Moab</td>
<td>CastleValleyUT_Daily</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Also, if not created by <code class="docutils literal notranslate"><span class="pre">PyWeatherQaQc</span></code>, the climate station time series
files should be in CSV format with a &quot;date&quot; column with datetime formats,
e.g. '12/01/2018'. By default <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span> <span class="pre">prep-input</span></code> creates the file
&quot;merged_input.csv&quot; in the current working directory which contains
metadata from climate stations as well as the lat, long, and gridMET ID
(cell index) of the nearest gridMET cell's centroid.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gridwxcomp prep-input <span class="o">[</span>OPTIONS<span class="o">]</span> STATION_META_PATH
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-prep-input-o">
<code class="descname">-o</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--out-path</code><code class="descclassname"> &lt;out_path&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-prep-input-o" title="Permalink to this definition">¶</a></dt>
<dd><p>File path to save output CSV</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-prep-input-g">
<code class="descname">-g</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--gridmet-meta</code><code class="descclassname"> &lt;gridmet_meta&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-prep-input-g" title="Permalink to this definition">¶</a></dt>
<dd><p>File path to gridmet_cell_data.csv metadata</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-prep-input-quiet">
<code class="descname">--quiet</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-prep-input-quiet" title="Permalink to this definition">¶</a></dt>
<dd><p>Supress command line output</p>
</dd></dl>

<p class="rubric">Arguments</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-prep-input-arg-station-meta-path">
<code class="descname">STATION_META_PATH</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-prep-input-arg-station-meta-path" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

</div>
<div class="section" id="gridwxcomp-download-gridmet-ee">
<h3><a class="toc-backref" href="#id15">gridwxcomp download-gridmet-ee</a><a class="headerlink" href="#gridwxcomp-download-gridmet-ee" title="Permalink to this headline">¶</a></h3>
<p>Download gridMET climate time series.</p>
<p>Download gridMET time series for cells that are paired to climate stations
in a CSV file that is first created by <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span> <span class="pre">prep-input</span></code>. Options
allow for downloading all years available (default) or select years, it is
also possible to redownload data for specified year(s). Uses the Google
Earth Engine Python API. If <code class="docutils literal notranslate"><span class="pre">--out-dir</span></code> is not specified, gridMET time
series CSVs are saved to a new directory named &quot;gridmet_data&quot; within the
current working directory.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gridwxcomp download-gridmet-ee <span class="o">[</span>OPTIONS<span class="o">]</span> INPUT_CSV
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-download-gridmet-ee-o">
<code class="descname">-o</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--out-dir</code><code class="descclassname"> &lt;out_dir&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-download-gridmet-ee-o" title="Permalink to this definition">¶</a></dt>
<dd><p>Folder to save downloaded gridMET time series</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-download-gridmet-ee-y">
<code class="descname">-y</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--years</code><code class="descclassname"> &lt;years&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-download-gridmet-ee-y" title="Permalink to this definition">¶</a></dt>
<dd><p>Year(s) to download, single year (YYYY) or range (YYYY-YYYY)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-download-gridmet-ee-u">
<code class="descname">-u</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--update-years</code><code class="descclassname"> &lt;update_years&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-download-gridmet-ee-u" title="Permalink to this definition">¶</a></dt>
<dd><p>Year(s) to redownload or update, YYYY or YYYY-YYYY</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-download-gridmet-ee-quiet">
<code class="descname">--quiet</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-download-gridmet-ee-quiet" title="Permalink to this definition">¶</a></dt>
<dd><p>Supress command line output</p>
</dd></dl>

<p class="rubric">Arguments</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-download-gridmet-ee-arg-input-csv">
<code class="descname">INPUT_CSV</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-download-gridmet-ee-arg-input-csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

</div>
<div class="section" id="gridwxcomp-spatial">
<h3><a class="toc-backref" href="#id16">gridwxcomp spatial</a><a class="headerlink" href="#gridwxcomp-spatial" title="Permalink to this headline">¶</a></h3>
<p>Spatially interpolate ratio statistics.</p>
<p>2-D interpolation of mean bias ratios or other statistics that exist in the
<code class="docutils literal notranslate"><span class="pre">SUMMARY_COMP_CSV</span></code> file created by <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span> <span class="pre">calc-bias-ratios</span></code>.
Interpolation algorithms include those provided by <a class="reference external" href="https://www.gdal.org/gdal_grid.html">gdal_grid</a>:
'invdist' (default), 'invdistnn', 'linear', 'average', and 'nearest'
and <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.Rbf.html#scipy.interpolate.Rbf" title="(in SciPy v1.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.interpolate.Rbf</span></code></a>: 'multiquadric', 'inverse', 'gaussian', 'linear_rbf', 'cubic', 'quintic', and 'thin_plate'. Parameters for gdal
algorithms are set using <code class="docutils literal notranslate"><span class="pre">--params</span></code> whereas the <code class="docutils literal notranslate"><span class="pre">--smooth</span></code> parameter
(default 0) is used by scipy radial basis functions. Default parameters
for gdal are stored in <a class="reference internal" href="#gridwxcomp.InterpGdal.default_params" title="gridwxcomp.InterpGdal.default_params"><code class="xref py py-attr docutils literal notranslate"><span class="pre">gridwxcomp.InterpGdal.default_params</span></code></a>.
Interpolation resampling resolution can be down- or up-scaled using
<code class="docutils literal notranslate"><span class="pre">--scale-factor</span></code> (default 0.1) which is applied to gridMET resolution of
4 km. On the first run this command will produce a fishnet of gridMET cells
that bound the climate stations in <code class="docutils literal notranslate"><span class="pre">SUMMARY_COMP_CSV</span></code> with optional
buffer of gridMET cells which can later be overwritten. All layers of mean
bias ratios found within <a class="reference internal" href="#gridwxcomp.InterpGdal.default_layers" title="gridwxcomp.InterpGdal.default_layers"><code class="xref py py-attr docutils literal notranslate"><span class="pre">gridwxcomp.InterpGdal.default_layers</span></code></a> are
interpolated by default unless <code class="docutils literal notranslate"><span class="pre">--layers</span></code> are specified. Interpolated
residuals to station point ratios are also estimated. Zonal means for
gridMET cells in the fishnet grid are extracted by default and assigned to
each gridMET cell by its index (GRIDMET_ID) in the full gridMET fishnet
that covers the CONUS. In total interpolated rasters, station point
shapefiles, fishnet grid for zonal stats, and CSVs of bias ratios and zonal
statistics are all created and stored in a file structure that is explained
in <a class="reference internal" href="#gridwxcomp.spatial.make_grid" title="gridwxcomp.spatial.make_grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.spatial.make_grid</span></code></a>. and <a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.spatial.interpolate</span></code></a>.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gridwxcomp spatial <span class="o">[</span>OPTIONS<span class="o">]</span> SUMMARY_COMP_CSV
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-o">
<code class="descname">-o</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--out</code><code class="descclassname"> &lt;out&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-o" title="Permalink to this definition">¶</a></dt>
<dd><p>Subdirectory for saving interpolated rasters</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-l">
<code class="descname">-l</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--layer</code><code class="descclassname"> &lt;layer&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-l" title="Permalink to this definition">¶</a></dt>
<dd><p>Layers to interpolate comma separated, e.g. Jan_mean,Aug_mean</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-b">
<code class="descname">-b</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--buffer</code><code class="descclassname"> &lt;buffer&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-b" title="Permalink to this definition">¶</a></dt>
<dd><p>Buffer for expanding interpolation region (gridMET cells)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-s">
<code class="descname">-s</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--scale</code><code class="descclassname"> &lt;scale&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-s" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale factor for gridMET interpolation, applied to 4 km res</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-f">
<code class="descname">-f</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--function</code><code class="descclassname"> &lt;function&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-f" title="Permalink to this definition">¶</a></dt>
<dd><p>Algorithm name for spatial interpolation</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-smooth">
<code class="descname">--smooth</code><code class="descclassname"> &lt;smooth&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-smooth" title="Permalink to this definition">¶</a></dt>
<dd><p>Smoothing parameter for radial basis funciton interpolation</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-p">
<code class="descname">-p</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--params</code><code class="descclassname"> &lt;params&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-p" title="Permalink to this definition">¶</a></dt>
<dd><p>Parameters for gdal_grid interpolation e.g. :power=2:smooth=0</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-z">
<code class="descname">-z</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--no-zonal-stats</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-z" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag to NOT extract zonal means of interpolated results</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-overwrite-grid">
<code class="descname">--overwrite-grid</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-overwrite-grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag to overwrite grid for zonal stats if already exists</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-options">
<code class="descname">--options</code><code class="descclassname"> &lt;options&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-options" title="Permalink to this definition">¶</a></dt>
<dd><p>Extra command line arguments for gdal_grid interpolation</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-g">
<code class="descname">-g</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--gridmet-meta</code><code class="descclassname"> &lt;gridmet_meta&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-g" title="Permalink to this definition">¶</a></dt>
<dd><p>file path to gridmet_cell_data.csv metadata</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-quiet">
<code class="descname">--quiet</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-quiet" title="Permalink to this definition">¶</a></dt>
<dd><p>Supress command line output</p>
</dd></dl>

<p class="rubric">Arguments</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-spatial-arg-summary-comp-csv">
<code class="descname">SUMMARY_COMP_CSV</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-spatial-arg-summary-comp-csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

</div>
<div class="section" id="gridwxcomp-plot">
<h3><a class="toc-backref" href="#id17">gridwxcomp plot</a><a class="headerlink" href="#gridwxcomp-plot" title="Permalink to this headline">¶</a></h3>
<p>Create comparison or diagnostic graphics.</p>
<p>Plot time series and scatter comparison plots at daily or monthly average
time periods. Plots are interactive (can be panned and zoomed) HTML format
and created for each station if time frequency of plots, i.e. <code class="docutils literal notranslate"><span class="pre">--freq</span></code>,
is &quot;monthly&quot; and for each month for each station if <code class="docutils literal notranslate"><span class="pre">--freq</span></code> is &quot;daily&quot;.
By default, if <code class="docutils literal notranslate"><span class="pre">--out-dir</span></code> is not specified all plots are saved in
&quot;[freq]_comp_plots&quot; where [freq] is set to <code class="docutils literal notranslate"><span class="pre">--freq</span></code>. Default time
frequency is &quot;daily&quot;.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gridwxcomp plot <span class="o">[</span>OPTIONS<span class="o">]</span> INPUT_CSV
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-f">
<code class="descname">-f</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--freq</code><code class="descclassname"> &lt;freq&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-f" title="Permalink to this definition">¶</a></dt>
<dd><p>Time frequency for comparison plots &quot;daily&quot; or &quot;monthly&quot;</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-o">
<code class="descname">-o</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--out-dir</code><code class="descclassname"> &lt;out_dir&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-o" title="Permalink to this definition">¶</a></dt>
<dd><p>Folder to save time series comparison plots</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-y">
<code class="descname">-y</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--year</code><code class="descclassname"> &lt;year&gt;</code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-y" title="Permalink to this definition">¶</a></dt>
<dd><p>Year to plot, single year (YYYY)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-quiet">
<code class="descname">--quiet</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-quiet" title="Permalink to this definition">¶</a></dt>
<dd><p>Supress command line output</p>
</dd></dl>

<p class="rubric">Arguments</p>
<dl class="option">
<dt id="cmdoption-gridwxcomp-plot-arg-input-csv">
<code class="descname">INPUT_CSV</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-gridwxcomp-plot-arg-input-csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Required argument</p>
</dd></dl>

</div>
</div>
<div class="section" id="python-functions-classes-and-modules">
<h2><a class="toc-backref" href="#id18">Python functions, classes, and modules</a><a class="headerlink" href="#python-functions-classes-and-modules" title="Permalink to this headline">¶</a></h2>
<div class="section" id="prep-input">
<h3><a class="toc-backref" href="#id19">prep_input</a><a class="headerlink" href="#prep-input" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="gridwxcomp.prep_input">
<code class="descclassname">gridwxcomp.</code><code class="descname">prep_input</code><span class="sig-paren">(</span><em>station_path</em>, <em>out_path='merged_input.csv'</em>, <em>gridmet_meta_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/prep_input.html#prep_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.prep_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Read list of climate stations and match each with its
closest GridMET cell, save CSV with information from both.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>station_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to CSV file containing list of climate
stations that will later be used to calculate monthly
bias ratios to GridMET reference ET.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>out_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to save output CSV, default is to save as
'merged_input.csv' to current working directory.</li>
<li><strong>gridmet_meta_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to metadata CSV file that contains
all gridMET cells for the contiguous United States. If None
it is looked for at the installation directory of <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code>
if not found it is looked for in the current working directory
as 'gridmet_cell_data.csv'.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">prep_input</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prep_input</span><span class="p">(</span><span class="s1">&#39;gridwxcomp/example_data/Station_Data.txt&#39;</span><span class="p">,</span><span class="s1">&#39;outfile.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>outfile.csv will be created containing station and corresponding
gridMET cell data. This file is later used as input for
<a class="reference internal" href="#gridwxcomp.download_gridmet_ee" title="gridwxcomp.download_gridmet_ee"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.download_gridmet_ee</span></code></a> and <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a> -- if the <code class="docutils literal notranslate"><span class="pre">gridmet_meta_path</span></code> is not passed as a
command line argument and it is not in the current working directory
and named &quot;gridmet_cell_data.csv&quot; and if <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code> was not
installed to the user's PATH, i.e. pip or python setup.py install.</li>
<li><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> -- if one or more of the following mandatory columns are
missing from the input CSV file (<code class="docutils literal notranslate"><span class="pre">station_path</span></code> parameter):
'Longitude', 'Latitude', 'Station', or 'Filename'.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If climate station time series files do <strong>NOT</strong> follow the format
created by <a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">pyWeatherQAQC</a>
i.e. microsoft excel files with data stored in a tab named 'corrected'.
Then station files should be in text (CSV) format with a column
named 'date' containing datetime strings e.g. '12/01/2018', that are
able to be parsed by Pandas. The CSV file produced by contains latitude,        longitude, and other fields for both the station and nearest gridMET
cell centroid. Fields that may refer to both gridMET and station data
have prefixes to distinguish, the climate station data are prefixed
with 'STATION' and those refering to gridMET have no prefix.</p>
</div>
</dd></dl>

</div>
<div class="section" id="download-gridmet-ee">
<h3><a class="toc-backref" href="#id20">download_gridmet_ee</a><a class="headerlink" href="#download-gridmet-ee" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="gridwxcomp.download_gridmet_ee">
<code class="descclassname">gridwxcomp.</code><code class="descname">download_gridmet_ee</code><span class="sig-paren">(</span><em>input_csv</em>, <em>out_folder</em>, <em>year_filter=''</em>, <em>year_update=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/download_gridmet_ee.html#download_gridmet_ee"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.download_gridmet_ee" title="Permalink to this definition">¶</a></dt>
<dd><p>Download gridMET time series data for multiple climate variables for
select gridMET cells as listed in <code class="docutils literal notranslate"><span class="pre">input_csv</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>input_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- file path of input CSV produced by <a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.prep_input</span></code></a></li>
<li><strong>out_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- directory path to save gridmet timeseries CSV files</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>year_filter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- default ''. Single year YYYY or range YYYY-YYYY
to download.</li>
<li><strong>year_update</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- default ''. Re-download existing data for year or
range, YYYY or YYYY-YYYY.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Say we wanted to download data for 2016 through 2018, from the command
line,</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ download_gridmet_ee.py -i merged_input.csv -o gridmet_data -y <span class="m">2016</span>-2018
</pre></div>
</div>
<p>note, &quot;merged_input.csv&quot; should have been created by first running
<a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.prep_input</span></code></a>. If the <code class="docutils literal notranslate"><span class="pre">[-y,</span> <span class="pre">--years]</span></code> option is not
given the default behaviour is to download gridMET data from 1979 up
through yesterday.</p>
<p>If the data for 2018 has changed since the last run or for debugging
purposes you can re-download data for all or select years with the
<code class="docutils literal notranslate"><span class="pre">[-u,</span> <span class="pre">--update-data]</span></code> option</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ python download_gridmet_ee.py -i merged_input.csv -o gridmet_data -y <span class="m">2018</span> -u
</pre></div>
</div>
<p>To download the same gridMET data within Python</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">download_gridmet_ee</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">download_gridmet_ee</span><span class="p">(</span><span class="s1">&#39;merged_input.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;gridmet_data&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-2018&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Running <a class="reference internal" href="#gridwxcomp.download_gridmet_ee" title="gridwxcomp.download_gridmet_ee"><code class="xref py py-func docutils literal notranslate"><span class="pre">download_gridmet_ee</span></code></a> also updates the CSV file
produced from <a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.prep_input</span></code></a> to include file paths to
gridMET time series files that are paired with climate stations.</p>
</dd></dl>

</div>
<div class="section" id="module-gridwxcomp.calc_bias_ratios">
<span id="calc-bias-ratios"></span><h3><a class="toc-backref" href="#id21">calc_bias_ratios</a><a class="headerlink" href="#module-gridwxcomp.calc_bias_ratios" title="Permalink to this headline">¶</a></h3>
<p>Calculate monthly bias ratios of variables from climate station
to overlapping gridMET cells.</p>
<p>Input file for this module must first be created by running
<a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.prep_input</span></code></a> followed by <a class="reference internal" href="#gridwxcomp.download_gridmet_ee" title="gridwxcomp.download_gridmet_ee"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.download_gridmet_ee</span></code></a>.</p>
<dl class="attribute">
<dt id="gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS">
<code class="descclassname">gridwxcomp.calc_bias_ratios.</code><code class="descname">GRIDMET_STATION_VARS</code><a class="headerlink" href="#gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS" title="Permalink to this definition">¶</a></dt>
<dd><p>mapping dictionary with gridMET
variable names as keys and station variable names as values.
Used to determine which station variable to calculate bias
ratios according to the given gridMET variable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Default values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GRIDMET_STATION_VARS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;u2_ms&#39;</span> <span class="p">:</span> <span class="s1">&#39;ws_2m (m/s)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tmin_c&#39;</span> <span class="p">:</span> <span class="s1">&#39;TMin (C)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tmax_c&#39;</span> <span class="p">:</span> <span class="s1">&#39;TMax (C)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;srad_wm2&#39;</span> <span class="p">:</span> <span class="s1">&#39;Rs (w/m2)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ea_kpa&#39;</span> <span class="p">:</span> <span class="s1">&#39;Vapor Pres (kPa)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;prcp_mm&#39;</span> <span class="p">:</span> <span class="s1">&#39;Precip (mm)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;etr_mm&#39;</span> <span class="p">:</span> <span class="s1">&#39;Calc_ETr (mm)&#39;</span><span class="p">,</span>
    <span class="s1">&#39;eto_mm&#39;</span> <span class="p">:</span> <span class="s1">&#39;Calc_ETo (mm)&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The module attribute <code class="docutils literal notranslate"><span class="pre">GRIDMET_STATION_VARS</span></code> can be manually adjusted,
if <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code> is installed in editable mode or used as scripts from the
root directory. New pairs of station-to-gridMET variables can then be made
or removed to efficiently use <code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp</span></code> on custom
station data that was <strong>not</strong> created by
<a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">PyWeatherQAQC</a>. Otherwise, the
same can be achieved by the <code class="docutils literal notranslate"><span class="pre">gridmet_var</span></code> and <code class="docutils literal notranslate"><span class="pre">station_var</span></code> arguments
to <a class="reference internal" href="#gridwxcomp.calc_bias_ratios.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">calc_bias_ratios</span></code></a>.</p>
</div>
<dl class="function">
<dt id="gridwxcomp.calc_bias_ratios.calc_bias_ratios">
<code class="descclassname">gridwxcomp.calc_bias_ratios.</code><code class="descname">calc_bias_ratios</code><span class="sig-paren">(</span><em>input_path</em>, <em>out_dir</em>, <em>gridmet_var='etr_mm'</em>, <em>station_var=None</em>, <em>gridmet_ID=None</em>, <em>day_limit=10</em>, <em>years='all'</em>, <em>comp=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/calc_bias_ratios.html#calc_bias_ratios"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.calc_bias_ratios.calc_bias_ratios" title="Permalink to this definition">¶</a></dt>
<dd><p>Read input CSV file and calculate mean monthly bias ratios between
station to corresponding gridMET cells for all station and gridMET
pairs, optionally calculate ratios for a single gridMET cell.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>input_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to input CSV file with matching
station climate and gridMET metadata. This file is
created by running <a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.prep_input</span></code></a> followed by
<a class="reference internal" href="#gridwxcomp.download_gridmet_ee" title="gridwxcomp.download_gridmet_ee"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.download_gridmet_ee</span></code></a>.</li>
<li><strong>out_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to directory to save CSV files with
monthly bias ratios of etr.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>gridmet_var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- default 'etr_mm'. GridMET climate variable
to calculate bias ratios.</li>
<li><strong>station_var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- default None. Climate station variable to use
to calculate bias ratios. If None, look up using <code class="docutils literal notranslate"><span class="pre">gridmet_var</span></code>
as a key to <a class="reference internal" href="#gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS" title="gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GRIDMET_STATION_VARS</span></code></a> dictionary found as a
module attribute to <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</li>
<li><strong>gridmet_ID</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) -- default None. GridMET ID (index) to only calculate
bias ratios for a single gridMET cell.</li>
<li><strong>day_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) -- default 10. Threshold number of days in month
of missing data, if less exclude month from calculations.</li>
<li><strong>years</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- default 'all'. Years to use for calculations
e.g. 2000-2005 or 2011.</li>
<li><strong>comp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) -- default True. Flag to save a &quot;comprehensive&quot;
summary output CSV file that contains station metadata and
statistics in addition to the mean monthly ratios.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>To use within Python for observed ET,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">calc_bias_ratios</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_path</span> <span class="o">=</span> <span class="s1">&#39;merged_input.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out_dir</span> <span class="o">=</span> <span class="s1">&#39;monthly_ratios&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gridmet_variable</span> <span class="o">=</span> <span class="s1">&#39;eto_mm&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">calc_bias_ratios</span><span class="p">(</span><span class="n">input_path</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">,</span> <span class="n">gridmet_var</span><span class="o">=</span><span class="n">gridmet_variable</span><span class="p">)</span>
</pre></div>
</div>
<p>To use custom station data, give the keyword argument <code class="docutils literal notranslate"><span class="pre">station_var</span></code>,
e.g. if we had climate daily time series data for precipitation
with the column named &quot;p&quot; then,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">calc_bias_ratios</span><span class="p">(</span><span class="n">input_path</span><span class="p">,</span> <span class="n">out_dir</span><span class="p">,</span> <span class="n">gridmet_var</span><span class="o">=</span><span class="s1">&#39;prcp_mm&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">station_var</span><span class="o">=</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This results in two CSV files in <code class="docutils literal notranslate"><span class="pre">out_dir</span></code> named
&quot;prcp_mm_summary_all_yrs.csv&quot; and &quot;prcp_mm_summary_comp_all_yrs.csv&quot;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a> -- if input file is invalid or not found.</li>
<li><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> -- if the input file does not contain file paths to
the climate station and gridMET time series files. This
occurs if, for example, the <a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.prep_input</span></code></a> and/or
the <a class="reference internal" href="#gridwxcomp.download_gridmet_ee" title="gridwxcomp.download_gridmet_ee"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.download_gridmet_ee</span></code></a> scripts have not been
run first. Also raised if the given <code class="docutils literal notranslate"><span class="pre">gridmet_var</span></code> or
<code class="docutils literal notranslate"><span class="pre">station_var</span></code> kwargs are invalid.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If an existing summary file contains a climate station that is being
reprocessed its monthly bias ratios and other data will be overwritten.
Also, to proceed with spatial analysis scripts, the comprehensive
summary file must be produced using this function first. If
<code class="docutils literal notranslate"><span class="pre">gridmet_var</span></code> keyword argument is given but the <code class="docutils literal notranslate"><span class="pre">station_var</span></code> is
left as default (None), the corresponding station variable is looked
up from the mapping dictionary in <code class="xref py py-mod docutils literal notranslate"><span class="pre">calc_bias_ratios.py</span></code>
named <a class="reference internal" href="#gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS" title="gridwxcomp.calc_bias_ratios.GRIDMET_STATION_VARS"><code class="xref py py-attr docutils literal notranslate"><span class="pre">GRIDMET_STATION_VARS</span></code></a>. To use climate data
that was  <strong>not</strong> created by <a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">pyWeatherQAQC</a>
which is where the default names are derived, the gridMET and station
variable names need to be explicitly passed as function arguments.</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-gridwxcomp.spatial">
<span id="spatial"></span><h3><a class="toc-backref" href="#id22">spatial</a><a class="headerlink" href="#module-gridwxcomp.spatial" title="Permalink to this headline">¶</a></h3>
<p>Perform multiple workflows needed to estimate the spatial surface of monthly
and annual bias ratios for multiple climatic variables. The input file is first
created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p>
<dl class="attribute">
<dt id="gridwxcomp.spatial.CELL_SIZE">
<code class="descclassname">gridwxcomp.spatial.</code><code class="descname">CELL_SIZE</code><a class="headerlink" href="#gridwxcomp.spatial.CELL_SIZE" title="Permalink to this definition">¶</a></dt>
<dd><p>constant gridMET cell size in decimal degrees,
value = 0.041666666666666664.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)">float</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All spatial files, i.e. vector and raster files, utilize the
<em>ESRI Shapefile</em> file or GeoTiff format.</p>
</div>
<dl class="function">
<dt id="gridwxcomp.spatial.make_points_file">
<code class="descclassname">gridwxcomp.spatial.</code><code class="descname">make_points_file</code><span class="sig-paren">(</span><em>in_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/spatial.html#make_points_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.spatial.make_points_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create vector shapefile of points with monthly mean bias ratios
for climate stations using all stations found in a comprehensive
CSV file created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>in_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to [var]_summary_comp.CSV file containing
monthly bias ratios, lat, long, and other data. Shapefile
&quot;[var]_summary_pts.shp&quot; is saved to parent directory of
<code class="docutils literal notranslate"><span class="pre">in_path</span></code> under &quot;spatial&quot; subdirectory.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>Create shapefile containing point data for all climate stations
in input summary file created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">spatial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># path to comprehensive summary CSV</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_file</span> <span class="o">=</span> <span class="s1">&#39;monthly_ratios/etr_mm_summary_comp_all_yrs.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spatial</span><span class="o">.</span><span class="n">make_points_file</span><span class="p">(</span><span class="n">summary_file</span><span class="p">)</span>
</pre></div>
</div>
<p>The result is the file &quot;etr_mm_summary_pts.shp&quot; being saved to
a subdirectory created in the directory containing <code class="docutils literal notranslate"><span class="pre">in_path</span></code>
named &quot;spatial&quot;, i.e.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;monthly_ratios/spatial/etr_mm_summary_pts.shp&quot;</span><span class="o">.</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a> -- if input summary CSV file is not found.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#gridwxcomp.spatial.make_points_file" title="gridwxcomp.spatial.make_points_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_points_file</span></code></a> will overwrite any existing point
shapefile of the same climate variable.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gridwxcomp.spatial.get_subgrid_bounds">
<code class="descclassname">gridwxcomp.spatial.</code><code class="descname">get_subgrid_bounds</code><span class="sig-paren">(</span><em>in_path</em>, <em>buffer</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/spatial.html#get_subgrid_bounds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.spatial.get_subgrid_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate bounding box for spatial interpolation grid from
comprehensive summary CSV file containing monthly bias ratios
and station locations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>in_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to comprehensive summary file containing
monthly bias ratios, created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</li>
<li><strong>buffer</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) -- number of gridMET cells to expand the rectangular extent
of the subgrid fishnet.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>tuple with coordinates in decimal degrees that</dt>
<dd><p class="first last">define the outer bounds of the subgrid fishnet in the format
(min long, max long, min lat, max lat)</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">bounds (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)">tuple</a>)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a> -- if input summary CSV file is not found.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">By expanding the grid to a larger area encompassing the climate
stations of interest <a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">interpolate</span></code></a> can be used to extrapolate
passed the bounds of the outer station locations.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gridwxcomp.spatial.make_grid">
<code class="descclassname">gridwxcomp.spatial.</code><code class="descname">make_grid</code><span class="sig-paren">(</span><em>in_path</em>, <em>bounds=None</em>, <em>buffer=25</em>, <em>overwrite=False</em>, <em>gridmet_meta_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/spatial.html#make_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.spatial.make_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Make fishnet grid (vector file of polygon geometry) for
select gridMET cells based on bounding coordinates.</p>
<p>Add gridMET ID values to each cell based on their centroid
lookup in <code class="docutils literal notranslate"><span class="pre">gridwxcomp/gridmet_cell_data.csv</span></code>. Assigns the
WGS84 reference coordinate system. The grid is later used to
spatially interpolate point data. Modified from the
<a class="reference external" href="https://pcjericks.github.io/py-gdalogr-cookbook/vector_layers.html#create-fishnet-grid">Python GDAL/OGR Cookbook</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>in_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to [var]_summary_comp_[years].csv file containing monthly
bias ratios, lat, long, and other data. Created by
<a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) -- default None. Tuple of bounding coordinates
in the following order (min long, max long, min lat, max lat)
which need to be in decimal degrees. Need to align with gridMET
resolution outer corners. If None, get extent from centoid
locations of climate stations in <code class="docutils literal notranslate"><span class="pre">in_path</span></code> summary CSV.</li>
<li><strong>buffer</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) -- default 25. Number of gridMET cells to expand
the rectangular extent of the subgrid fishnet and interpolated
output raster.</li>
<li><strong>overwrite</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) -- default False. If True overwrite the grid
shapefile at <code class="docutils literal notranslate"><span class="pre">out_path</span></code> if it already exists.</li>
<li><strong>gridmet_meta_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- default None. Path to metadata CSV file
that contains all gridMET cells for the contiguous United
States. If None it is looked for at the install directory of
gridwxcomp (i.e. with pip install) or within the current directory
as &quot;gridmet_cell_data.csv&quot;.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Build a fishnet uniform grid that matches gridMET cells around
climate stations found in <code class="docutils literal notranslate"><span class="pre">in_path</span></code> summary CSV file with a
25 cell buffer.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">spatial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># assign input paths</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_file</span> <span class="o">=</span> <span class="s1">&#39;monthly_ratios/etr_mm_summary_comp_all_yrs.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># make fishnet of gridMET cells for interpolation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spatial</span><span class="o">.</span><span class="n">make_grid</span><span class="p">(</span><span class="n">summary_file</span><span class="p">)</span>
</pre></div>
</div>
<p>The file will be saved as &quot;grid.shp&quot; to a newly created subdirectory
&quot;spatial&quot; in the same directory as the input summary CSV file. i.e.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>monthly_ratios/
├── etr_mm_summary_all_yrs.csv
├── etr_mm_summary_comp_all_yrs.csv
└── spatial/
    ├── grid.cpg
    ├── grid.dbf
    ├── grid.prj
    ├── grid.shp
    └── grid.shx
</pre></div>
</div>
<p>To use a smaller buffer to the extent of the grid assign the
<code class="docutils literal notranslate"><span class="pre">buffer</span></code> keyword argument</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spatial</span><span class="o">.</span><span class="n">make_grid</span><span class="p">(</span><span class="n">summary_file</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>If the grid file already exists the default action is to not
overwrite. To overwrite an existing grid if, for example, you
are working with a new set of climate stations as input, then
set the <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> keyword argument to True.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spatial</span><span class="o">.</span><span class="n">make_grid</span><span class="p">(</span><span class="n">summary_file</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a> -- if input summary CSV file is not found.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If cells in the fishnet grid lie outside of the gridMET master
fishnet for the contiguous U.S., the GRIDMET_ID will be assigned
to -999.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gridwxcomp.spatial.interpolate">
<code class="descclassname">gridwxcomp.spatial.</code><code class="descname">interpolate</code><span class="sig-paren">(</span><em>in_path</em>, <em>layer='all'</em>, <em>out=None</em>, <em>scale_factor=0.1</em>, <em>function='invdist'</em>, <em>smooth=0</em>, <em>params=None</em>, <em>bounds=None</em>, <em>buffer=25</em>, <em>zonal_stats=True</em>, <em>options=None</em>, <em>gridmet_meta_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/spatial.html#interpolate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.spatial.interpolate" title="Permalink to this definition">¶</a></dt>
<dd><p>Use various methods to interpolate a 2-dimensional surface of
calculated bias ratios or other statistics for station/gridMET
pairs found in input comprehensive summary CSV.</p>
<p>Options allow for modifying down- or up-scaling the resolution of the
resampling grid and to select from multiple interpolation methods.
Interploated surfaces are saved as GeoTIFF rasters. Zonal statistics
using <a class="reference internal" href="#gridwxcomp.spatial.gridmet_zonal_stats" title="gridwxcomp.spatial.gridmet_zonal_stats"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridmet_zonal_stats</span></code></a> are also extracted to gridMET cells in
the fishnet grid built first by <a class="reference internal" href="#gridwxcomp.spatial.make_grid" title="gridwxcomp.spatial.make_grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_grid</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>in_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to [var]_summary_comp_[years].csv file containing
monthly bias ratios, lat, long, and other data. Created by
<a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>layer</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) -- default 'all'. Name of variable in <code class="docutils literal notranslate"><span class="pre">in_path</span></code>
to conduct 2-D interpolation. e.g. 'Annual_mean'.</li>
<li><strong>out</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- default None. Subdirectory to save GeoTIFF raster(s).</li>
<li><strong>scale_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) -- default 0.1. Scaling factor to apply to
original gridMET fishnet to create resampling resolution. If
scale_factor = 0.1, the resolution will be one tenth gridMET
resolution or 400 m.</li>
<li><strong>function</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- <p>default 'invdist'. Interpolation method, gdal
methods include: 'invdist', 'indistnn', 'linear', 'average',
and 'nearest' see <a class="reference external" href="https://www.gdal.org/gdal_grid.html">gdal_grid</a>.
Radial basis functions, see <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.Rbf.html#scipy.interpolate.Rbf" title="(in SciPy v1.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.interpolate.Rbf</span></code></a>,
include: 'multiquadric', 'inverse', 'gaussian', 'linear_rbf',
'cubic', 'quintic', and 'thin_plate'.</p>
</li>
<li><strong>smooth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) -- default 0. Smooth parameter for Rbf functions.</li>
<li><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) -- default None. Parameters for interpolation
using gdal, see defaults in <a class="reference internal" href="#gridwxcomp.InterpGdal" title="gridwxcomp.InterpGdal"><code class="xref py py-class docutils literal notranslate"><span class="pre">gridwxcomp.InterpGdal</span></code></a>.</li>
<li><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) -- default None. Tuple of bounding coordinates
in the following order (min long, max long, min lat, max lat)
which need to be in decimal degrees. Need to align with gridMET
resolution outer corners. If None, get extent from centoid
locations of climate stations in <code class="docutils literal notranslate"><span class="pre">in_path</span></code> summary CSV.</li>
<li><strong>buffer</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) -- default 25. Number of gridMET cells to expand
the rectangular extent of the subgrid fishnet and interpolated
output raster.</li>
<li><strong>zonal_stats</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) -- default True. Calculate zonal means of interpolated
surface to gridMET cells in fishnet and save to a CSV file.
The CSV file will be saved to the same directory as the interpolated
raster file(s).</li>
<li><strong>options</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) -- default None. Extra command line arguments
for gdal interpolation.</li>
<li><strong>gridmet_meta_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) -- default None. Path to metadata CSV
file that contains all gridMET cells for the contiguous United
States. If None it is looked for at the install directory of
gridwxcomp (e.g. after pip install gridwxcomp) or within the
current directory as 'gridmet_cell_data.csv'.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Let's say we wanted to interpolate the &quot;Annual_mean&quot; bias
ratio in an input CSV first created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a> and a fishnet
grid was first created by <a class="reference internal" href="#gridwxcomp.spatial.make_grid" title="gridwxcomp.spatial.make_grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_grid</span></code></a>. This example uses the
&quot;invdist&quot; method (default) to interpolate to a 400 m resolution
surface. The result is a GeoTIFF raster that has an extent that
encompasses station locations in the input file plus an additional
optional buffer of outer gridMET cells. Additionally, point residuals
of bias ratios are added to CSV and newly created point shapefiles,
zonal (gridMET cell) means are also extracted and stored in a CSV.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">spatial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_file</span> <span class="o">=</span> <span class="s1">&#39;monthly_ratios/etr_mm_summary_comp_all_yrs.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">buffer</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layer</span> <span class="o">=</span> <span class="s1">&#39;Annual_mean&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;power&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;smooth&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out_dir</span> <span class="o">=</span> <span class="s1">&#39;s20_p1&#39;</span> <span class="c1"># optional subdir name for saving rasters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">interpolate</span><span class="p">(</span><span class="n">summary_file</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">layer</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">out_dir</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">scale_factor</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="n">buffer</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting file structure that is created by the above command is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>monthly_ratios/
├── etr_mm_summary_all_yrs.csv
├── etr_mm_summary_comp_all_yrs.csv
└── spatial/
    ├── etr_mm_invdist_400m/
    │   └── s20_p1/
    │       ├── annual_mean.tiff
    │       ├── annual_mean.vrt
    │       ├── etr_mm_summary_comp_all_yrs.csv
    │       ├── etr_mm_summary_pts.cpg
    │       ├── etr_mm_summary_pts.dbf
    │       ├── etr_mm_summary_pts.prj
    │       ├── etr_mm_summary_pts.shp
    │       ├── etr_mm_summary_pts.shx
    │       └── gridMET_stats.csv
    ├── grid.cpg
    ├── grid.dbf
    ├── grid.prj
    ├── grid.shp
    └── grid.shx
</pre></div>
</div>
<p>Specifically, the interpolated raster is saved to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monthly_ratios/spatial/etr_mm_invdist_400m/s20_p1/Annual_mean.tiff&#39;</span>
</pre></div>
</div>
<p>where the file name and directory is based on the variable being
interpolated, methods, and the raster resolution. The <code class="docutils literal notranslate"><span class="pre">out</span></code>
keyword argument lets us add any number of subdirectories to the final
output directory, in this case the 's20_p1' dir contains info on params.
In this case the original gridMET resolution is 4 km therefore the
scale facter of 0.1 results in a 400 m resolution.</p>
<p>The final result will be the creation of the CSV:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monthly_ratios/spatial/etr_mm_invdist_400m/s20_p1/gridMET_stats.csv&#39;</span>
</pre></div>
</div>
<p>In &quot;gridMET_stats.csv&quot; the zonal mean for ratios of annual station to
gridMET ETr will be stored along with gridMET IDs, e.g.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GRIDMET_ID</th>
<th class="head">Annual_mean</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>515902</td>
<td>0.87439453125</td>
</tr>
<tr class="row-odd"><td>514516</td>
<td>0.888170013427734</td>
</tr>
<tr class="row-even"><td>513130</td>
<td>0.90002197265625</td>
</tr>
<tr class="row-odd"><td>...</td>
<td>...</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>To calculate zonal statistics of bias ratios that are not part of
the default or command line workflow we can assign any numeric layer
in the input summary CSV to be interpolations. For example if
we wanted to interpolate the coefficient of variation of the growing
season bias ratio &quot;April_to_oct_cv&quot;, then we could
estimate the surface of this variable straightforwardly,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">layer</span> <span class="o">=</span> <span class="s1">&#39;April_to_oct_cv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func</span> <span class="o">=</span> <span class="s1">&#39;invdistnn&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># we can also &#39;upscale&#39; the interpolation resolution</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">interpolate</span><span class="p">(</span><span class="n">summary_file</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">layer</span><span class="p">,</span> <span class="n">scale_factor</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">function</span><span class="o">=</span><span class="n">func</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="n">buffer</span><span class="p">)</span>
</pre></div>
</div>
<p>This will create the GeoTIFF raster:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monthly_ratios/spatial/etr_mm_invdistnn_400m/April_to_oct_cv.tiff&#39;</span>
</pre></div>
</div>
<p>And the zonal means will be added as a column named &quot;April_to_oct_cv&quot;
to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monthly_ratios/spatial/etr_mm_invdistnn_400m/gridMET_stats.csv&#39;</span>
</pre></div>
</div>
<p>As with other components of <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code>, any other climatic
variables that exist in the gridMET dataset can be used along
with any corresponding station time series data from the user.
The input (<code class="docutils literal notranslate"><span class="pre">in_path</span></code>) to all routines in <a class="reference internal" href="#module-gridwxcomp.spatial" title="gridwxcomp.spatial"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.spatial</span></code></a>
is the summary CSV created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>, the
prefix to this file is what determines the climatic variable
that spatial analysis is conducted. See <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>
for examples of how to use different climatic variables, e.g.
TMax or ETo.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a> -- if the input summary CSV file or the
fishnet for extracting zonal statistics do not exist.
The fishnet should be in the subdirectory of <code class="docutils literal notranslate"><span class="pre">in_path</span></code>
i.e. &quot;&lt;in_path&gt;/spatial/grid.shp&quot;.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This function can be used independently of <a class="reference internal" href="#gridwxcomp.spatial.make_grid" title="gridwxcomp.spatial.make_grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_grid</span></code></a>
however, if the buffer and input [var]_summary_comp_[years].csv files
arguments differ from those used for <a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">interpolate</span></code></a> the
raster may not fully cover the fishnet which may result in
gaps in the zonal statistics.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gridwxcomp.spatial.calc_pt_error">
<code class="descclassname">gridwxcomp.spatial.</code><code class="descname">calc_pt_error</code><span class="sig-paren">(</span><em>in_path</em>, <em>out_dir</em>, <em>layer</em>, <em>grid_var</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/spatial.html#calc_pt_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.spatial.calc_pt_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate point ratio estimates from interpolated raster, residuals,
and add to output summary CSV and point shapefile. Make copies of
updated files and saves to directory with interpolated rasters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>in_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to comprehensive summary CSV created by
<a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a></li>
<li><strong>out_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to dir that contains interpolated raster</li>
<li><strong>layer</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- layer to calculate error e.g. &quot;annual_mean&quot;</li>
<li><strong>grid_var</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- name of gridMET variable e.g. &quot;etr_mm&quot;</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This function should be run <strong>after</strong> <a class="reference internal" href="#gridwxcomp.spatial.make_points_file" title="gridwxcomp.spatial.make_points_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_points_file</span></code></a>
because it copies data from the shapefile it created.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="gridwxcomp.spatial.gridmet_zonal_stats">
<code class="descclassname">gridwxcomp.spatial.</code><code class="descname">gridmet_zonal_stats</code><span class="sig-paren">(</span><em>in_path</em>, <em>raster</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/spatial.html#gridmet_zonal_stats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.spatial.gridmet_zonal_stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate zonal means from interpolated surface of etr bias ratios
created by <a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">interpolate</span></code></a> using the fishnet grid created by
<a class="reference internal" href="#gridwxcomp.spatial.make_grid" title="gridwxcomp.spatial.make_grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">make_grid</span></code></a>. Save mean values for each gridMET cell to
a CSV file joined to gridMET IDs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>in_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to [var]_summary_comp_[years].csv file containing
monthly bias ratios, lat, long, and other data. Created by
<a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.</li>
<li><strong>raster</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to interpolated raster of bias ratios to
be used for zonal stats. First created by <a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">interpolate</span></code></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>Although it is prefered to use this function as part of
<a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">interpolate</span></code></a> or indirectly using the <a class="reference internal" href="#module-gridwxcomp.spatial" title="gridwxcomp.spatial"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.spatial</span></code></a>
command line usage. However if the grid shapefile and spatial
interpolated raster(s) have already been created without zonal
stats then,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">spatial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># assign input paths</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_file</span> <span class="o">=</span> <span class="s1">&#39;monthly_ratios/etr_mm_summary_comp_[years].csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raster_file</span> <span class="o">=</span> <span class="s1">&#39;monthly_ratios/spatial/etr_mm_invdist_400m/Jan_mean.tiff&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spatial</span><span class="o">.</span><span class="n">gridmet_zonal_stats</span><span class="p">(</span><span class="n">summary_file</span><span class="p">,</span> <span class="n">raster_file</span><span class="p">)</span>
</pre></div>
</div>
<p>The final result will be the creation of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monthly_ratios/spatial/etr_mm_invdist_400m/gridMET_stats.csv&#39;</span>
</pre></div>
</div>
<p>The resulting CSV contains the gridMET IDS and zonal means
for each gridMET cell in the fishnet which must exist at:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;monthly_ratios/spatial/grid.shp&#39;</span>
</pre></div>
</div>
<p>also see <a class="reference internal" href="#gridwxcomp.spatial.interpolate" title="gridwxcomp.spatial.interpolate"><code class="xref py py-func docutils literal notranslate"><span class="pre">interpolate</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#FileNotFoundError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileNotFoundError</span></code></a> -- if the input summary CSV file or the
fishnet for extracting zonal statistics do not exist.
The fishnet should be in the subdirectory of <code class="docutils literal notranslate"><span class="pre">in_path</span></code>
at &quot;/spatial/grid.shp&quot;.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If zonal statistics are estimated for the same variable on the
same raster more than once, the contents of that column in the
gridMET_stats.csv file will be overwritten.</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-gridwxcomp.daily_comparison">
<span id="daily-comparison"></span><h3><a class="toc-backref" href="#id23">daily_comparison</a><a class="headerlink" href="#module-gridwxcomp.daily_comparison" title="Permalink to this headline">¶</a></h3>
<p>Create time series and scatter comparison plots between paired station and
gridMET climatic variables.</p>
<dl class="function">
<dt id="gridwxcomp.daily_comparison.daily_comparison">
<code class="descclassname">gridwxcomp.daily_comparison.</code><code class="descname">daily_comparison</code><span class="sig-paren">(</span><em>input_csv</em>, <em>out_dir=None</em>, <em>year_filter=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/daily_comparison.html#daily_comparison"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.daily_comparison.daily_comparison" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare daily Wx Station Data from
<a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">PyWeatherQAQC</a> with gridMET
for each month in year specified.</p>
<p>The <a class="reference internal" href="#gridwxcomp.daily_comparison.daily_comparison" title="gridwxcomp.daily_comparison.daily_comparison"><code class="xref py py-func docutils literal notranslate"><span class="pre">daily_comparison</span></code></a> function produces HTML files with time series
and scatter plots of station versus gridMET climate variables. It uses the
<a class="reference external" href="https://bokeh.pydata.org/en/latest/">bokeh</a> module to create interactive
plots, e.g. they can be zoomed in/out and panned. Separate plot files are
created for each month of a single year.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>input_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to input CSV file containing paired station/
gridMET metadata. This file is created by running
<a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.prep_input</span></code></a> followed by <a class="reference internal" href="#gridwxcomp.download_gridmet_ee" title="gridwxcomp.download_gridmet_ee"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.download_gridmet_ee</span></code></a>.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>out_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) -- default None. Directory to save comparison plots,
if None save to &quot;daily_comp_plots&quot; in currect directory.</li>
<li><strong>year_filter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) -- default ''. Single year YYYY or range YYYY-YYYY</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>The <a class="reference internal" href="#gridwxcomp.daily_comparison.daily_comparison" title="gridwxcomp.daily_comparison.daily_comparison"><code class="xref py py-func docutils literal notranslate"><span class="pre">daily_comparison</span></code></a> function will generate HTML files with
bokeh plots for paired climate variables, e.g. etr_mm, eto_mm,
u2_ms, tmin_c, tmax_c, srad_wm2, ea_kpa, and Ko (dew point depression).
Monthly plots are created for a single year.</p>
<p>From the command line, use the &quot;plot&quot; command with the <code class="docutils literal notranslate"><span class="pre">[-f,</span> <span class="pre">--freq]</span></code>
option left as default (&quot;daily&quot;),</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ gridwxcomp plot merged_input.csv -o comp_plots_2016 -y <span class="m">2016</span>
</pre></div>
</div>
<p>or within Python,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">daily_comparison</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">daily_comparison</span><span class="p">(</span><span class="s1">&#39;merged_input.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;comp_plots_2016&#39;</span><span class="p">,</span> <span class="s1">&#39;2016&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Both methods result in monthly HTML <a class="reference external" href="https://bokeh.pydata.org/en/latest/">bokeh</a>
plots being saved to &quot;comp_plots_2016/STATION_ID/&quot; where &quot;STATION_ID&quot;
is the station ID as found in the input CSV file. A file is saved for
each month with the station ID, month, and year in the file name.
If <code class="docutils literal notranslate"><span class="pre">out_dir</span></code> keyword argument or <code class="docutils literal notranslate"><span class="pre">[-o,</span> <span class="pre">--out-dir]</span></code> command line
option is not given the plots will be saved to a directory named
&quot;daily_comp_plots&quot;.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If there are less than five days of data in a month the plot for that
month will not be created.</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-gridwxcomp.monthly_comparison">
<span id="monthly-comparison"></span><h3><a class="toc-backref" href="#id24">monthly_comparison</a><a class="headerlink" href="#module-gridwxcomp.monthly_comparison" title="Permalink to this headline">¶</a></h3>
<p>Create time series and scatter comparison plots between paired station and
gridMET climatic variables.</p>
<dl class="function">
<dt id="gridwxcomp.monthly_comparison.monthly_comparison">
<code class="descclassname">gridwxcomp.monthly_comparison.</code><code class="descname">monthly_comparison</code><span class="sig-paren">(</span><em>input_csv</em>, <em>out_dir=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/monthly_comparison.html#monthly_comparison"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.monthly_comparison.monthly_comparison" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare monthly average Wx Station Data from
<a class="reference external" href="https://github.com/WSWUP/pyWeatherQAQC">PyWeatherQAQC</a> with gridMET.</p>
<p>The <a class="reference internal" href="#gridwxcomp.monthly_comparison.monthly_comparison" title="gridwxcomp.monthly_comparison.monthly_comparison"><code class="xref py py-func docutils literal notranslate"><span class="pre">monthly_comparison</span></code></a> function produces HTML files with time series
and scatter plots of station versus gridMET climate variables of monthly
mean data. It uses the <a class="reference external" href="https://bokeh.pydata.org/en/latest/">bokeh</a> module
to create interactive plots, e.g. they can be zoomed in/out and panned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>input_csv</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to input CSV file containing
paired station/gridMET metadata. This file is
created by running <a class="reference internal" href="#gridwxcomp.prep_input" title="gridwxcomp.prep_input"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.prep_input</span></code></a> followed by
<a class="reference internal" href="#gridwxcomp.download_gridmet_ee" title="gridwxcomp.download_gridmet_ee"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.download_gridmet_ee</span></code></a>.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><strong>out_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- default None. Directory to save comparison plots.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<p>The <a class="reference internal" href="#gridwxcomp.monthly_comparison.monthly_comparison" title="gridwxcomp.monthly_comparison.monthly_comparison"><code class="xref py py-func docutils literal notranslate"><span class="pre">monthly_comparison</span></code></a> function will generate HTML files with
bokeh plots for paired climate variable, e.g. etr_mm,
eto_mm, u2_ms, tmin_c, tmax_c, srad_wm2, ea_kpa, and Ko (dew point
depression).</p>
<p>From the command line, use the &quot;plot&quot; command with the <code class="docutils literal notranslate"><span class="pre">[-f,</span> <span class="pre">--freq]</span></code>
option set to &quot;monthly&quot;,</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ gridwxcomp plot merged_input.csv -freq monthly -o monthly_plots
</pre></div>
</div>
<p>or within Python,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">monthly_comparison</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">monthly_comparison</span><span class="p">(</span><span class="s1">&#39;merged_input.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;monthly_plots&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Both methods result in monthly HTML bokeh plots being saved
to &quot;monthly_plots/&quot; which contains a plot file for each station
as found in the input CSV file. If <code class="docutils literal notranslate"><span class="pre">out_dir</span></code> keyword argument or
<code class="docutils literal notranslate"><span class="pre">[-o,</span> <span class="pre">--out-dir]</span></code> command line option is not given the plots will
be saved to a directory named &quot;monthly_comp_plots&quot;.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If there are less than 2 months of data the plot for that
station will not be created.</p>
</div>
</dd></dl>

</div>
<div class="section" id="interpgdal">
<h3><a class="toc-backref" href="#id25">InterpGdal</a><a class="headerlink" href="#interpgdal" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="gridwxcomp.InterpGdal">
<em class="property">class </em><code class="descclassname">gridwxcomp.</code><code class="descname">InterpGdal</code><span class="sig-paren">(</span><em>summary_csv_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/interpgdal.html#InterpGdal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.InterpGdal" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Usage of gdal command line tools within <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code>, currently
utilizes the <a class="reference external" href="https://www.gdal.org/gdal_grid.html">gdal_grid</a>
command line tool.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>summary_csv_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- path to [var]_summary_comp CSV file created
by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a> containing point bias ratios,
lat, and long.</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.CELL_SIZE">
<code class="descname">CELL_SIZE</code><a class="headerlink" href="#gridwxcomp.InterpGdal.CELL_SIZE" title="Permalink to this definition">¶</a></dt>
<dd><p>resolution of gridMET dataset in decimal degrees.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)">float</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.interp_methods">
<code class="descname">interp_methods</code><a class="headerlink" href="#gridwxcomp.InterpGdal.interp_methods" title="Permalink to this definition">¶</a></dt>
<dd><p>gdal_grid interpolation algorithms.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)">tuple</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.default_layers">
<code class="descname">default_layers</code><a class="headerlink" href="#gridwxcomp.InterpGdal.default_layers" title="Permalink to this definition">¶</a></dt>
<dd><p>layers to interpolate created by
<a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>, e.g. &quot;Jan_mean&quot;, found in
<code class="docutils literal notranslate"><span class="pre">summary_csv_path</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)">tuple</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.default_params">
<code class="descname">default_params</code><a class="headerlink" href="#gridwxcomp.InterpGdal.default_params" title="Permalink to this definition">¶</a></dt>
<dd><p>dictionary with default parameters for each
interpolation algorithm, slightly modified from gdal defaults.
Keys are interpolation method names, keys are dictionaries with
parameter names keys and corresponding values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.summary_csv_path">
<code class="descname">summary_csv_path</code><a class="headerlink" href="#gridwxcomp.InterpGdal.summary_csv_path" title="Permalink to this definition">¶</a></dt>
<dd><p>absolute path object to
input <code class="docutils literal notranslate"><span class="pre">summary_csv_path</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.layers">
<code class="descname">layers</code><a class="headerlink" href="#gridwxcomp.InterpGdal.layers" title="Permalink to this definition">¶</a></dt>
<dd><p>list of layers in <code class="docutils literal notranslate"><span class="pre">summary_csv_path</span></code> to interpolate
e.g. when using <a class="reference internal" href="#gridwxcomp.InterpGdal.gdal_grid" title="gridwxcomp.InterpGdal.gdal_grid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InterpGdal.gdal_grid</span></code></a> with <code class="docutils literal notranslate"><span class="pre">layer=&quot;all&quot;</span></code>
defaults to <a class="reference internal" href="#gridwxcomp.InterpGdal.default_layers" title="gridwxcomp.InterpGdal.default_layers"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InterpGdal.default_layers</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.grid_bounds">
<code class="descname">grid_bounds</code><a class="headerlink" href="#gridwxcomp.InterpGdal.grid_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>default None. Extent for interpolation
raster in order (min long, max long, min lat, max lat).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)">tuple</a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)">None</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.interp_meth">
<code class="descname">interp_meth</code><a class="headerlink" href="#gridwxcomp.InterpGdal.interp_meth" title="Permalink to this definition">¶</a></dt>
<dd><p>default 'invdist'. gdal_grid interpolation method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.interped_rasters">
<code class="descname">interped_rasters</code><a class="headerlink" href="#gridwxcomp.InterpGdal.interped_rasters" title="Permalink to this definition">¶</a></dt>
<dd><p>empty list that is appended with
<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> objects to interpolated rasters after using
<a class="reference internal" href="#gridwxcomp.InterpGdal.gdal_grid" title="gridwxcomp.InterpGdal.gdal_grid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InterpGdal.gdal_grid</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="gridwxcomp.InterpGdal.params">
<code class="descname">params</code><a class="headerlink" href="#gridwxcomp.InterpGdal.params" title="Permalink to this definition">¶</a></dt>
<dd><p>default None. After <a class="reference internal" href="#gridwxcomp.InterpGdal.gdal_grid" title="gridwxcomp.InterpGdal.gdal_grid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InterpGdal.gdal_grid</span></code></a>
<code class="docutils literal notranslate"><span class="pre">params</span></code> is updated with the last used interpolation parameters
in the form of a dictionary with parameter names as keys.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)">None</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<p class="rubric">Example</p>
<p>The <a class="reference internal" href="#gridwxcomp.InterpGdal" title="gridwxcomp.InterpGdal"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpGdal</span></code></a> class is useful for experimenting with multiple
interpolation algorithms provided by gdal which are optimized and
often sensitive to multiple parameters. We can use the object
to loop over a range of parameter combinations to test how algorithms
perform, we might pick a single layer to test, in this case the
growing season bias ratios between station and gridMET reference
evapotranspiration (etr_mm). Below is a routine to conduct a
basic sensitivity analysis of the power and smooth parameters of the
inverse distance to a power interpolation method,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">InterpGdal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create instance variable from summary csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_file</span> <span class="o">=</span> <span class="s1">&#39;PATH/TO/etr_mm_summary_comp.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create a InterpGdal instance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span> <span class="o">=</span> <span class="n">InterpGdal</span><span class="p">(</span><span class="n">summary_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layer</span> <span class="o">=</span> <span class="s1">&#39;growseason_mean&#39;</span> <span class="c1"># could be a list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># run inverse distance interpolation with different params</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">]:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="c1"># build output directory based on parameter sets</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;spatial&#39;</span><span class="p">,</span> <span class="s1">&#39;invdist&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>            <span class="s1">&#39;power=</span><span class="si">{}</span><span class="s1">_smooth=</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;power&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">,</span> <span class="s1">&#39;smooth&#39;</span><span class="p">:</span> <span class="n">s</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">test</span><span class="o">.</span><span class="n">gdal_grid</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">layer</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</div>
<p>Note, we did not assign the interpolation method 'invdist' because it
is the default. To use another interpolation method we would
assign the <code class="docutils literal notranslate"><span class="pre">interp_meth</span></code> kwarg to <a class="reference internal" href="#gridwxcomp.InterpGdal.gdal_grid" title="gridwxcomp.InterpGdal.gdal_grid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InterpGdal.gdal_grid</span></code></a>.
Similarly, we could experiment with other parameters which all can be
found in the class attribute <a class="reference internal" href="#gridwxcomp.InterpGdal.default_params" title="gridwxcomp.InterpGdal.default_params"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InterpGdal.default_params</span></code></a>. The
instance variable <a class="reference internal" href="#gridwxcomp.InterpGdal.params" title="gridwxcomp.InterpGdal.params"><code class="xref py py-attr docutils literal notranslate"><span class="pre">InterpGdal.params</span></code></a> can also be used to save
metadata on parameters used for each run.</p>
<dl class="attribute">
<dt>
<code class="descname">CELL_SIZE</code><em class="property"> = 0.041666666666666664</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">interp_methods</code><em class="property"> = ('average', 'invdist', 'invdistnn', 'linear', 'nearest')</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">default_layers</code><em class="property"> = ('Jan_mean', 'Feb_mean', 'Mar_mean', 'Apr_mean', 'May_mean', 'Jun_mean', 'Jul_mean', 'Aug_mean', 'Sep_mean', 'Oct_mean', 'Nov_mean', 'Dec_mean', 'growseason_mean', 'annual_mean', 'summer_mean')</em></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">default_params</code><em class="property"> = {'average': {'angle': 0, 'min_points': 0, 'nodata': -999, 'radius1': 2, 'radius2': 2}, 'invdist': {'angle': 0, 'max_points': 0, 'min_points': 0, 'nodata': -999, 'power': 4, 'radius1': 0, 'radius2': 0, 'smoothing': 0.2}, 'invdistnn': {'max_points': 12, 'min_points': 0, 'nodata': -999, 'power': 4, 'radius': 10, 'smoothing': 0.2}, 'linear': {'nodata': -999, 'radius': -1}, 'nearest': {'angle': 0, 'nodata': -999, 'radius1': 0, 'radius2': 0}}</em></dt>
<dd></dd></dl>

<dl class="method">
<dt id="gridwxcomp.InterpGdal.gdal_grid">
<code class="descname">gdal_grid</code><span class="sig-paren">(</span><em>layer='all'</em>, <em>out_dir=''</em>, <em>interp_meth='invdist'</em>, <em>params=None</em>, <em>bounds=None</em>, <em>nx_cells=None</em>, <em>ny_cells=None</em>, <em>scale_factor=0.1</em>, <em>zonal_stats=True</em>, <em>options=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/interpgdal.html#InterpGdal.gdal_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.InterpGdal.gdal_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Run gdal_grid command line tool to interpolate point ratios.</p>
<p>For further information on theinterpolation algorithms including
their function, parameters, and options see
<a class="reference external" href="https://www.gdal.org/gdal_grid.html">gdal_grid</a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>layer</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) -- default 'all'. Name of summary file column
to interpolate, e.g. 'Jan_mean', or list of names. If 'all'
use all variables in mutable instance attribute &quot;layers&quot;.</li>
<li><strong>out_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- default ''. Output directory to save rasters and
zonal stats CSV, always appended to the root dir of the
input summary CSV parent path that contains point ratios.</li>
<li><strong>interp_meth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- default 'invdist'. gdal interpolation algorithm</li>
<li><strong>params</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) -- default None. Parameters for
interpolation algorithm. See examples for format rules.</li>
<li><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) -- default None. Tuple of bounding coordinates
in the following order (min long, max long, min lat, max lat)
which need to be in decimal degrees. If None, get extent from
locations of climate stations in input summary CSV with 25 cell
buffer.</li>
<li><strong>nx_cells</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) -- default None. Number of pixels in x dim. of raster,
if None calculated from <code class="docutils literal notranslate"><span class="pre">bounds</span></code>.</li>
<li><strong>ny_cells</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) -- default None. Number of pixels in y dim. of raster,
if None calculated from <code class="docutils literal notranslate"><span class="pre">bounds</span></code>.</li>
<li><strong>scale_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) -- default 0.1. Scaling factor to apply to
original gridMET fishnet to create resampling resolution. If
scale_factor = 0.1, the resolution will be one tenth gridMET
resolution or 400 m.</li>
<li><strong>zonal_stats</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) -- default True. Calculate zonal means of
interpolated surface to gridMET cells in fishnet and save to a
CSV file. The CSV file will be saved to the same directory as
the interpolated raster file(s).</li>
<li><strong>options</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.7)"><em>None</em></a>) -- default None. Extra command line options for
gdal_grid spatial interpolation.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>The default interpolation algorithm 'invdist' or inverse distance
weighting to a power to interpolate bias ratios in a summary CSV
file that was first created by <a class="reference internal" href="#module-gridwxcomp.calc_bias_ratios" title="gridwxcomp.calc_bias_ratios"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gridwxcomp.calc_bias_ratios</span></code></a>.
The default option will interpolate all layers in <a class="reference internal" href="#gridwxcomp.InterpGdal.default_layers" title="gridwxcomp.InterpGdal.default_layers"><code class="xref py py-obj docutils literal notranslate"><span class="pre">InterpGdal.default_layers</span></code></a>
and calculate zonal statistics for all layers. It will also assume
the boundaries of the rasters are defined by the centroid locations
of the <em>outer</em> station locations in the input summary CSV plus a 25
gridMET cell buffer, the pixel size will be 400m (scale_factor=0.1).            We also limit the interpolation to two layers, growing season and
annual mean bias ratios,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">gridwxcomp</span> <span class="k">import</span> <span class="n">InterpGdal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary_file</span> <span class="o">=</span> <span class="s1">&#39;PATH/TO/[var]_summary_comp.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out_dir</span> <span class="o">=</span> <span class="s1">&#39;default_params&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;growseason_mean&#39;</span><span class="p">,</span> <span class="s1">&#39;annual_mean&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create a InterpGdal instance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span> <span class="o">=</span> <span class="n">InterpGdal</span><span class="p">(</span><span class="n">summary_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># run inverse distance interpolation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">gdal_grid</span><span class="p">(</span><span class="n">out_dir</span><span class="o">=</span><span class="n">out_dir</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="n">layers</span><span class="p">)</span>
</pre></div>
</div>
<p>Note, zonal statistics on gridMET cells in a fishnet grid are
calculated by default, to avoid an error the fishnet must have been
previously created using <a class="reference internal" href="#gridwxcomp.spatial.make_grid" title="gridwxcomp.spatial.make_grid"><code class="xref py py-func docutils literal notranslate"><span class="pre">gridwxcomp.spatial.make_grid</span></code></a>. After            running the code above the following files will be created in the
'default_params' directory which will be build in the same location
as the input summary CSV:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>default_params/
├── annual_mean.tiff
├── annual_mean.vrt
├── growseason_mean.tiff
├── growseason_mean.vrt
└── gridMET_stats.csv
</pre></div>
</div>
<p>GeoTiff interpolated raster files are now created for select layers
as well as VRT (virtual raster) meta files that store info
on each raster's data source. The file &quot;gridMET_stats.csv&quot; contains
gridMET ID as an index and each layer zonal mean as columns. For
example,</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="39%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">GRIDMET_ID</th>
<th class="head">growseason_mean</th>
<th class="head">annual_mean</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>511747</td>
<td>0.9650671287940088</td>
<td>0.9078723876243023</td>
</tr>
<tr class="row-odd"><td>510361</td>
<td>0.9658465063428492</td>
<td>0.9097255715561022</td>
</tr>
<tr class="row-even"><td>508975</td>
<td>0.9667075970344162</td>
<td>0.9117676407214926</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>On a final note, there are several <a class="reference internal" href="#gridwxcomp.InterpGdal" title="gridwxcomp.InterpGdal"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpGdal</span></code></a> instance
attributes that may be useful, for example to see the parameters
that were used for the last call to <a class="reference internal" href="#gridwxcomp.InterpGdal.gdal_grid" title="gridwxcomp.InterpGdal.gdal_grid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InterpGdal.gdal_grid</span></code></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">params</span>
<span class="go">{&#39;power&#39;: 4,</span>
<span class="go"> &#39;smoothing&#39;: 0.2,</span>
<span class="go"> &#39;radius1&#39;: 0,</span>
<span class="go"> &#39;radius2&#39;: 0,</span>
<span class="go"> &#39;angle&#39;: 0,</span>
<span class="go"> &#39;max_points&#39;: 0,</span>
<span class="go"> &#39;min_points&#39;: 0,</span>
<span class="go"> &#39;nodata&#39;: -999}</span>
</pre></div>
</div>
<p>Or to find the paths to the interpolated raster files that
have been created by the instance (all), the &quot;interped_rasters&quot;
instance attribute is a list of all <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> objects
of absolute paths of raster files. To get them as strings,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">test</span><span class="o">.</span><span class="n">interped_rasters</span><span class="p">))</span>
<span class="go">[&#39;PATH/TO/growseason_mean.tiff&#39;,</span>
<span class="go"> &#39;PATH/TO/annual_mean.tiff&#39;]</span>
</pre></div>
</div>
<p>Similary, the raster extent that was used and will be used again for
any subsequent calls of <a class="reference internal" href="#gridwxcomp.InterpGdal.gdal_grid" title="gridwxcomp.InterpGdal.gdal_grid"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InterpGdal.gdal_grid</span></code></a> can be
retrieved by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">grid_bounds</span>
<span class="go">(-111.74583329966664,</span>
<span class="go"> -108.74583330033335,</span>
<span class="go"> 38.21250000003333,</span>
<span class="go"> 40.462499999966674)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">nx_cells</span></code> and <code class="docutils literal notranslate"><span class="pre">ny_cells</span></code> arguments are an option for
defining the output raster's resolution. If these arguments are
passed then the <code class="docutils literal notranslate"><span class="pre">scale_factor</span></code> argument has no effect. The latter
assumes raster resolution is relative to gridMET (4 km).</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> -- if interp_meth is not a valid gdal_grid interpolation
algorithm name.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-gridwxcomp.util">
<span id="util"></span><h3><a class="toc-backref" href="#id26">util</a><a class="headerlink" href="#module-gridwxcomp.util" title="Permalink to this headline">¶</a></h3>
<p>Utility functions or classes for <code class="docutils literal notranslate"><span class="pre">gridwxcomp</span></code> package</p>
<dl class="function">
<dt id="gridwxcomp.util.parse_yr_filter">
<code class="descclassname">gridwxcomp.util.</code><code class="descname">parse_yr_filter</code><span class="sig-paren">(</span><em>dt_df</em>, <em>years</em>, <em>label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gridwxcomp/util.html#parse_yr_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#gridwxcomp.util.parse_yr_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse string year filter and apply it to datetime-indexed
DataFrame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dt_df</strong> (<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.2)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>) -- datetime-indexed DataFrame</li>
<li><strong>years</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) -- years to select, e.g. 2015 or 2000-2010</li>
<li><strong>label</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) -- identifier to print warning message if <code class="docutils literal notranslate"><span class="pre">years</span></code>
filter partially overlaps with actual date index</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>first element is</dt>
<dd><p class="first last">input DataFrame <code class="docutils literal notranslate"><span class="pre">dt_df</span></code> indexed to <code class="docutils literal notranslate"><span class="pre">years</span></code> filter,
second element is string of year range, e.g. '2001_2011'</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">ret (tuple of (<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.24.2)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>, str))</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2000&#39;</span><span class="p">,</span> <span class="s1">&#39;2015&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="p">,</span> <span class="n">yr_str</span> <span class="o">=</span> <span class="n">parse_yr_filter</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;1998-2002&#39;</span><span class="p">,</span> <span class="s1">&#39;station1&#39;</span><span class="p">)</span>
<span class="go">WARNING: data for station1 starts in 2000 but you gave 1998</span>
<span class="go">Years used will only include 2000 to 2002</span>
</pre></div>
</div>
<p>Now df will only contain indices with dates between 2000 and
2002 and</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">yr_str</span>
<span class="go">&#39;1998_2002&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> -- if <code class="docutils literal notranslate"><span class="pre">years</span></code> is invalid or not found
in time series index of DataFrame.</td>
</tr>
</tbody>
</table>
</dd></dl>

<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="changelog.html" class="btn btn-neutral float-right" title="Change Log" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_started.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, John Volk and Chris Pearson

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-XXXXXXX-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>